{"version":3,"file":"index.js","sources":["../dist-src/util/misc.js","../dist-src/reporters/format.js","../dist-src/reporters/lang/en.js","../dist-src/reporters/base-reporter.js","../dist-src/reporters/console/helpers/tree-helper.js","../dist-src/reporters/console/util.js","../dist-src/reporters/console/progress-bar.js","../dist-src/reporters/console/spinner-progress.js","../dist-src/reporters/console/console-reporter.js","../dist-src/reporters/json-reporter.js","../dist-src/constants.js","../dist-src/util/map.js","../dist-src/util/fs.js","../dist-src/util/normalize-manifest/for-publish.js","../dist-src/commands/build.js","../dist-src/util/normalize-manifest/typos.js","../dist-src/util/normalize-manifest/validate.js","../dist-src/util/normalize-manifest/util.js","../dist-src/util/normalize-manifest/licenses.js","../dist-src/util/normalize-manifest/infer-license.js","../dist-src/util/normalize-manifest/fix.js","../dist-src/util/normalize-manifest/index.js","../dist-src/util/blocking-queue.js","../dist-src/errors.js","../dist-src/util/child.js","../dist-src/util/fix-cmd-win-slashes.js","../dist-src/util/execute-lifecycle-script.js","../dist-src/config.js","../dist-src/util/signal-handler.js","../dist-src/util/conversion.js","../dist-src/index.js"],"sourcesContent":["/* @flow */\nexport function sortAlpha(a, b) {\n    // sort alphabetically in a deterministic way\n    const shortLen = Math.min(a.length, b.length);\n    for (let i = 0; i < shortLen; i++) {\n        const aChar = a.charCodeAt(i);\n        const bChar = b.charCodeAt(i);\n        if (aChar !== bChar) {\n            return aChar - bChar;\n        }\n    }\n    return a.length - b.length;\n}\nexport function sortOptionsByFlags(a, b) {\n    const aOpt = a.flags.replace(/-/g, '');\n    const bOpt = b.flags.replace(/-/g, '');\n    return sortAlpha(aOpt, bOpt);\n}\nexport function entries(obj) {\n    const entries = [];\n    if (obj) {\n        for (const key in obj) {\n            entries.push([key, obj[key]]);\n        }\n    }\n    return entries;\n}\nexport function removePrefix(pattern, prefix) {\n    if (pattern.startsWith(prefix)) {\n        pattern = pattern.slice(prefix.length);\n    }\n    return pattern;\n}\nexport function removeSuffix(pattern, suffix) {\n    if (pattern.endsWith(suffix)) {\n        return pattern.slice(0, -suffix.length);\n    }\n    return pattern;\n}\nexport function addSuffix(pattern, suffix) {\n    if (!pattern.endsWith(suffix)) {\n        return pattern + suffix;\n    }\n    return pattern;\n}\nexport function hyphenate(str) {\n    return str.replace(/[A-Z]/g, match => {\n        return '-' + match.charAt(0).toLowerCase();\n    });\n}\nexport function compareSortedArrays(array1, array2) {\n    if (array1.length !== array2.length) {\n        return false;\n    }\n    for (let i = 0, len = array1.length; i < len; i++) {\n        if (array1[i] !== array2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function sleep(ms) {\n    return new Promise(resolve => {\n        setTimeout(resolve, ms);\n    });\n}\n","function formatFunction(...strs) {\n    return strs.join(' ');\n}\nexport const defaultFormatter = {\n    bold: formatFunction,\n    dim: formatFunction,\n    italic: formatFunction,\n    underline: formatFunction,\n    inverse: formatFunction,\n    strikethrough: formatFunction,\n    black: formatFunction,\n    red: formatFunction,\n    green: formatFunction,\n    yellow: formatFunction,\n    blue: formatFunction,\n    magenta: formatFunction,\n    cyan: formatFunction,\n    white: formatFunction,\n    gray: formatFunction,\n    grey: formatFunction,\n    stripColor: formatFunction,\n};\n","const messages = {\n    upToDate: 'Already up-to-date.',\n    folderInSync: 'Folder in sync.',\n    nothingToInstall: 'Nothing to install.',\n    resolvingPackages: 'Resolving packages',\n    checkingManifest: 'Validating package.json',\n    fetchingPackages: 'Fetching packages',\n    linkingDependencies: 'Linking dependencies',\n    rebuildingPackages: 'Rebuilding all packages',\n    buildingFreshPackages: 'Building fresh packages',\n    cleaningModules: 'Cleaning modules',\n    bumpingVersion: 'Bumping version',\n    savingHar: 'Saving HAR file: $0',\n    answer: 'Answer?',\n    usage: 'Usage',\n    installCommandRenamed: '`install` has been replaced with `add` to add new dependencies. Run $0 instead.',\n    globalFlagRemoved: '`--global` has been deprecated. Please run $0 instead.',\n    waitingInstance: 'Waiting for the other pika instance to finish (pid $0, inside $1)',\n    waitingNamedInstance: 'Waiting for the other pika instance to finish ($0)',\n    offlineRetrying: 'There appears to be trouble with your network connection. Retrying...',\n    internalServerErrorRetrying: 'There appears to be trouble with the npm registry (returned $1). Retrying...',\n    clearedCache: 'Cleared cache.',\n    couldntClearPackageFromCache: \"Couldn't clear package $0 from cache\",\n    clearedPackageFromCache: 'Cleared package $0 from cache',\n    packWroteTarball: 'Wrote tarball to $0.',\n    helpExamples: '  Examples:\\n$0\\n',\n    helpCommands: '  Commands:\\n$0\\n',\n    helpCommandsMore: '  Run `$0` for more information on specific commands.',\n    helpLearnMore: '  Visit $0 to learn more about Pika.\\n',\n    manifestPotentialTypo: 'Potential typo $0, did you mean $1?',\n    manifestBuiltinModule: '$0 is also the name of a node core module',\n    manifestNameDot: \"Name can't start with a dot\",\n    manifestNameIllegalChars: 'Name contains illegal characters',\n    manifestNameBlacklisted: 'Name is blacklisted',\n    manifestLicenseInvalid: 'License should be a valid SPDX license expression',\n    manifestLicenseNone: 'No license field',\n    manifestStringExpected: '$0 is not a string',\n    manifestDependencyCollision: '$0 has dependency $1 with range $2 that collides with a dependency in $3 of the same name with version $4',\n    manifestDirectoryNotFound: 'Unable to read $0 directory of module $1',\n    verboseFileCopy: 'Copying $0 to $1.',\n    verboseFileLink: 'Creating hardlink at $0 to $1.',\n    verboseFileSymlink: 'Creating symlink at $0 to $1.',\n    verboseFileSkip: 'Skipping copying of file $0 as the file at $1 is the same size ($2) and mtime ($3).',\n    verboseFileSkipSymlink: 'Skipping copying of $0 as the file at $1 is the same symlink ($2).',\n    verboseFileSkipHardlink: 'Skipping copying of $0 as the file at $1 is the same hardlink ($2).',\n    verboseFileRemoveExtraneous: 'Removing extraneous file $0.',\n    verboseFilePhantomExtraneous: \"File $0 would be marked as extraneous but has been removed as it's listed as a phantom file.\",\n    verboseFileSkipArtifact: 'Skipping copying of $0 as the file is marked as a built artifact and subject to change.',\n    verboseFileFolder: 'Creating directory $0.',\n    verboseRequestStart: 'Performing $0 request to $1.',\n    verboseRequestFinish: 'Request $0 finished with status code $1.',\n    configSet: 'Set $0 to $1.',\n    configDelete: 'Deleted $0.',\n    configNpm: 'npm config',\n    configPika: 'pika config',\n    couldntFindPackagejson: \"Couldn't find a package.json file in $0\",\n    couldntFindMatch: \"Couldn't find match for $0 in $1 for $2.\",\n    couldntFindPackageInCache: \"Couldn't find any versions for $0 that matches $1 in our cache (possible versions are $2). This is usually caused by a missing entry in the lockfile, running Pika without the --offline flag may help fix this issue.\",\n    couldntFindVersionThatMatchesRange: \"Couldn't find any versions for $0 that matches $1\",\n    chooseVersionFromList: 'Please choose a version of $0 from this list:',\n    moduleNotInManifest: \"This module isn't specified in a package.json file.\",\n    moduleAlreadyInManifest: '$0 is already in $1. Please remove existing entry first before adding it to $2.',\n    unknownFolderOrTarball: \"Passed folder/tarball doesn't exist,\",\n    unknownPackage: \"Couldn't find package $0.\",\n    unknownPackageName: \"Couldn't find package name.\",\n    unknownUser: \"Couldn't find user $0.\",\n    unknownRegistryResolver: 'Unknown registry resolver $0',\n    userNotAnOwner: \"User $0 isn't an owner of this package.\",\n    invalidVersionArgument: 'Use the $0 flag to create a new version.',\n    invalidVersion: 'Invalid version supplied.',\n    requiredVersionInRange: 'Required version in range.',\n    packageNotFoundRegistry: \"Couldn't find package $0 on the $1 registry.\",\n    requiredPackageNotFoundRegistry: \"Couldn't find package $0 required by $1 on the $2 registry.\",\n    doesntExist: \"Package $1 refers to a non-existing file '$0'.\",\n    missingRequiredPackageKey: `Package $0 doesn't have a $1.`,\n    invalidAccess: 'Invalid argument for access, expected public or restricted.',\n    invalidCommand: 'Invalid subcommand. Try $0',\n    invalidGistFragment: 'Invalid gist fragment $0.',\n    invalidHostedGitFragment: 'Invalid hosted git fragment $0.',\n    invalidFragment: 'Invalid fragment $0.',\n    invalidPackageName: 'Invalid package name.',\n    invalidPackageVersion: \"Can't add $0: invalid package version $1.\",\n    couldntFindManifestIn: \"Couldn't find manifest in $0.\",\n    shrinkwrapWarning: 'npm-shrinkwrap.json found. This will not be updated or respected. See https://yarnpkg.com/en/docs/migrating-from-npm for more information.',\n    npmLockfileWarning: 'package-lock.json found. Your project contains lock files generated by tools other than Pika. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.',\n    lockfileOutdated: 'Outdated lockfile. Please run `pika install` and try again.',\n    lockfileMerged: 'Merge conflict detected in pika.lock and successfully merged.',\n    lockfileConflict: 'A merge conflict was found in pika.lock but it could not be successfully merged, regenerating pika.lock from scratch.',\n    ignoredScripts: 'Ignored scripts due to flag.',\n    missingAddDependencies: 'Missing list of packages to add to your project.',\n    yesWarning: 'The yes flag has been set. This will automatically answer yes to all questions, which may have security implications.',\n    networkWarning: \"You don't appear to have an internet connection. Try the --offline flag to use the cache for registry queries.\",\n    flatGlobalError: 'The package $0 requires a flat dependency graph. Add `\"flat\": true` to your package.json and try again.',\n    noName: `Package doesn't have a name.`,\n    noVersion: `Package doesn't have a version.`,\n    answerRequired: 'An answer is required.',\n    missingWhyDependency: 'Missing package name, folder or path to file to identify why a package has been installed',\n    bugReport: 'If you think this is a bug, please open a bug report with the information provided in $0.',\n    unexpectedError: 'An unexpected error occurred: $0.',\n    jsonError: 'Error parsing JSON at $0, $1.',\n    noPermission: 'Cannot create $0 due to insufficient permissions.',\n    noGlobalFolder: 'Cannot find a suitable global folder. Tried these: $0',\n    allDependenciesUpToDate: 'All of your dependencies are up to date.',\n    legendColorsForVersionUpdates: 'Color legend : \\n $0    : Major Update backward-incompatible updates \\n $1 : Minor Update backward-compatible features \\n $2  : Patch Update backward-compatible bug fixes',\n    frozenLockfileError: 'Your lockfile needs to be updated, but pika was run with `--frozen-lockfile`.',\n    fileWriteError: 'Could not write file $0: $1',\n    fileDeleteError: 'Could not delete file $0: $1',\n    multiplePackagesCantUnpackInSameDestination: 'Pattern $0 is trying to unpack in the same destination $1 as pattern $2. This could result in non-deterministic behavior, skipping.',\n    incorrectLockfileEntry: 'Lockfile has incorrect entry for $0. Ignoring it.',\n    invalidResolutionName: 'Resolution field $0 does not end with a valid package name and will be ignored',\n    invalidResolutionVersion: 'Resolution field $0 has an invalid version entry and may be ignored',\n    incompatibleResolutionVersion: 'Resolution field $0 is incompatible with requested version $1',\n    pikaOutdated: \"Your current version of Pika is out of date. The latest version is $0, while you're on $1.\",\n    pikaOutdatedInstaller: 'To upgrade, download the latest installer at $0.',\n    pikaOutdatedCommand: 'To upgrade, run the following command:',\n    tooManyArguments: 'Too many arguments, maximum of $0.',\n    tooFewArguments: 'Not enough arguments, expected at least $0.',\n    noArguments: \"This command doesn't require any arguments.\",\n    ownerRemoving: 'Removing owner $0 from package $1.',\n    ownerRemoved: 'Owner removed.',\n    ownerRemoveError: \"Couldn't remove owner.\",\n    ownerGetting: 'Getting owners for package $0',\n    ownerGettingFailed: \"Couldn't get list of owners.\",\n    ownerAlready: 'This user is already an owner of this package.',\n    ownerAdded: 'Added owner.',\n    ownerAdding: 'Adding owner $0 to package $1',\n    ownerAddingFailed: \"Couldn't add owner.\",\n    ownerNone: 'No owners.',\n    teamCreating: 'Creating team',\n    teamRemoving: 'Removing team',\n    teamAddingUser: 'Adding user to team',\n    teamRemovingUser: 'Removing user from team',\n    teamListing: 'Listing teams',\n    distFailed: `⚠️  Distribution \"$0\" failed to build: $1 $2`,\n    distExiting: `   Exiting...`,\n    distContinuing: `   Continuing...`,\n    cleaning: 'Cleaning modules',\n    cleanCreatingFile: 'Creating $0',\n    cleanCreatedFile: 'Created $0. Please review the contents of this file then run \"pika autoclean --force\" to perform a clean.',\n    cleanAlreadyExists: '$0 already exists. To revert to the default file, delete $0 then rerun this command.',\n    cleanRequiresForce: 'This command required the \"--force\" flag to perform the clean. This is a destructive operation. Files specified in $0 will be deleted.',\n    cleanDoesNotExist: '$0 does not exist. Autoclean will delete files specified by $0. Run \"autoclean --init\" to create $0 with the default entries.',\n    binLinkCollision: \"There's already a linked binary called $0 in your global Pika bin. Could not link this package's $0 bin entry.\",\n    linkCollision: \"There's already a package called $0 registered. This command has had no effect. If this command was run in another folder with the same name, the other folder is still linked. Please run pika unlink in the other folder if you want to register this folder.\",\n    linkMissing: 'No registered package found called $0.',\n    linkRegistered: 'Registered $0.',\n    linkRegisteredMessage: 'You can now run `pika link $0` in the projects where you want to use this package and it will be used instead.',\n    linkUnregistered: 'Unregistered $0.',\n    linkUnregisteredMessage: 'You can now run `pika unlink $0` in the projects where you no longer want to use this package.',\n    linkUsing: 'Using linked package for $0.',\n    linkDisusing: 'Removed linked package $0.',\n    linkDisusingMessage: 'You will need to run `pika` to re-install the package that was linked.',\n    linkTargetMissing: 'The target of linked package $0 is missing. Removing link.',\n    createInvalidBin: 'Invalid bin entry found in package $0.',\n    createMissingPackage: 'Package not found - this is probably an internal error, and should be reported at https://github.com/yarnpkg/yarn/issues.',\n    workspacesAddRootCheck: 'Running this command will add the dependency to the workspace root rather than the workspace itself, which might not be what you want - if you really meant it, make it explicit by running this command again with the -W flag (or --ignore-workspace-root-check).',\n    workspacesRemoveRootCheck: 'Running this command will remove the dependency from the workspace root rather than the workspace itself, which might not be what you want - if you really meant it, make it explicit by running this command again with the -W flag (or --ignore-workspace-root-check).',\n    workspacesFocusRootCheck: 'This command can only be run inside an individual workspace.',\n    workspacesRequirePrivateProjects: 'Workspaces can only be enabled in private projects.',\n    workspacesSettingMustBeArray: 'The workspaces field in package.json must be an array.',\n    workspacesDisabled: 'Your project root defines workspaces but the feature is disabled in your Pika config. Please check \"workspaces-experimental\" in your .pikarc file.',\n    workspacesNohoistRequirePrivatePackages: 'nohoist config is ignored in $0 because it is not a private package. If you think nohoist should be allowed in public packages, please submit an issue for your use case.',\n    workspacesNohoistDisabled: `$0 defines nohoist but the feature is disabled in your Pika config (\"workspaces-nohoist-experimental\" in .pikarc file)`,\n    workspaceRootNotFound: \"Cannot find the root of your workspace - are you sure you're currently in a workspace?\",\n    workspaceMissingWorkspace: 'Missing workspace name.',\n    workspaceMissingCommand: 'Missing command name.',\n    workspaceUnknownWorkspace: 'Unknown workspace $0.',\n    workspaceVersionMandatory: 'Missing version in workspace at $0, ignoring.',\n    workspaceNameMandatory: 'Missing name in workspace at $0, ignoring.',\n    workspaceNameDuplicate: 'There are more than one workspace with name $0',\n    cacheFolderSkipped: 'Skipping preferred cache folder $0 because it is not writable.',\n    cacheFolderMissing: \"Pika hasn't been able to find a cache folder it can use. Please use the explicit --cache-folder option to tell it what location to use, or make one of the preferred locations writable.\",\n    cacheFolderSelected: 'Selected the next writable cache folder in the list, will be $0.',\n    execMissingCommand: 'Missing command name.',\n    noScriptsAvailable: 'There are no scripts specified inside package.json.',\n    noBinAvailable: 'There are no binary scripts available.',\n    dashDashDeprecation: `From Pika 1.0 onwards, scripts don't require \"--\" for options to be forwarded. In a future version, any explicit \"--\" will be forwarded as-is to the scripts.`,\n    commandNotSpecified: 'No command specified.',\n    binCommands: 'Commands available from binary scripts: ',\n    possibleCommands: 'Project commands',\n    commandQuestion: 'Which command would you like to run?',\n    commandFailedWithCode: 'Command failed with exit code $0.',\n    commandFailedWithSignal: 'Command failed with signal $0.',\n    packageRequiresNodeGyp: 'This package requires node-gyp, which is not currently installed. Pika will attempt to automatically install it. If this fails, you can run \"pika global add node-gyp\" to manually install it.',\n    nodeGypAutoInstallFailed: 'Failed to auto-install node-gyp. Please run \"pika global add node-gyp\" manually. Error: $0',\n    foundIncompatible: 'Found incompatible module',\n    incompatibleEngine: 'The engine $0 is incompatible with this module. Expected version $1. Got $2',\n    incompatibleCPU: 'The CPU architecture $0 is incompatible with this module.',\n    incompatibleOS: 'The platform $0 is incompatible with this module.',\n    invalidEngine: 'The engine $0 appears to be invalid.',\n    optionalCompatibilityExcluded: '$0 is an optional dependency and failed compatibility check. Excluding it from installation.',\n    optionalModuleFail: 'This module is OPTIONAL, you can safely ignore this error',\n    optionalModuleScriptFail: 'Error running install script for optional dependency: $0',\n    optionalModuleCleanupFail: 'Could not cleanup build artifacts from failed install: $0',\n    unmetPeer: '$0 has unmet peer dependency $1.',\n    incorrectPeer: '$0 has incorrect peer dependency $1.',\n    selectedPeer: 'Selecting $1 at level $2 as the peer dependency of $0.',\n    missingBundledDependency: '$0 is missing a bundled dependency $1. This should be reported to the package maintainer.',\n    savedNewDependency: 'Saved 1 new dependency.',\n    savedNewDependencies: 'Saved $0 new dependencies.',\n    directDependencies: 'Direct dependencies',\n    allDependencies: 'All dependencies',\n    foundWarnings: 'Found $0 warnings.',\n    foundErrors: 'Found $0 errors.',\n    savedLockfile: 'Saved lockfile.',\n    noRequiredLockfile: 'No lockfile in this directory. Run `pika install` to generate one.',\n    noLockfileFound: 'No lockfile found.',\n    invalidSemver: 'Invalid semver version',\n    newVersion: 'New version',\n    currentVersion: 'Current version',\n    noVersionOnPublish: 'Proceeding with current version',\n    manualVersionResolution: 'Unable to find a suitable version for $0, please choose one by typing one of the numbers below:',\n    manualVersionResolutionOption: '$0 which resolved to $1',\n    createdTag: 'Created tag.',\n    createdTagFail: \"Couldn't add tag.\",\n    deletedTag: 'Deleted tag.',\n    deletedTagFail: \"Couldn't delete tag.\",\n    gettingTags: 'Getting tags',\n    deletingTags: 'Deleting tag',\n    creatingTag: 'Creating tag $0 = $1',\n    whyStart: 'Why do we have the module $0?',\n    whyFinding: 'Finding dependency',\n    whyCalculating: 'Calculating file sizes',\n    whyUnknownMatch: \"We couldn't find a match!\",\n    whyInitGraph: 'Initialising dependency graph',\n    whyWhoKnows: \"We don't know why this module exists\",\n    whyDiskSizeWithout: 'Disk size without dependencies: $0',\n    whyDiskSizeUnique: 'Disk size with unique dependencies: $0',\n    whyDiskSizeTransitive: 'Disk size with transitive dependencies: $0',\n    whySharedDependencies: 'Number of shared dependencies: $0',\n    whyHoistedTo: `Has been hoisted to $0`,\n    whyHoistedFromSimple: `This module exists because it's hoisted from $0.`,\n    whyNotHoistedSimple: `This module exists here because it's in the nohoist list $0.`,\n    whyDependedOnSimple: `This module exists because $0 depends on it.`,\n    whySpecifiedSimple: `This module exists because it's specified in $0.`,\n    whyReasons: 'Reasons this module exists',\n    whyHoistedFrom: 'Hoisted from $0',\n    whyNotHoisted: `in the nohoist list $0`,\n    whyDependedOn: '$0 depends on it',\n    whySpecified: `Specified in $0`,\n    whyMatch: `\\r=> Found $0`,\n    uninstalledPackages: 'Uninstalled packages.',\n    uninstallRegenerate: 'Regenerating lockfile and installing missing dependencies',\n    cleanRemovedFiles: 'Removed $0 files',\n    cleanSavedSize: 'Saved $0 MB.',\n    configFileFound: 'Found configuration file $0.',\n    configPossibleFile: 'Checking for configuration file $0.',\n    npmUsername: 'npm username',\n    npmPassword: 'npm password',\n    npmEmail: 'npm email',\n    npmOneTimePassword: 'npm one-time password',\n    loggingIn: 'Logging in',\n    loggedIn: 'Logged in.',\n    notRevokingEnvToken: 'Not revoking login token, specified via environment variable.',\n    notRevokingConfigToken: 'Not revoking login token, specified via config file.',\n    noTokenToRevoke: 'No login token to revoke.',\n    revokingToken: 'Revoking token',\n    revokedToken: 'Revoked login token.',\n    loginAsPublic: 'Logging in as public',\n    incorrectCredentials: 'Incorrect username or password.',\n    incorrectOneTimePassword: 'Incorrect one-time password.',\n    twoFactorAuthenticationEnabled: 'Two factor authentication enabled.',\n    clearedCredentials: 'Cleared login credentials.',\n    publishFail: \"Couldn't publish package: $0\",\n    publishPrivate: 'Package marked as private, not publishing.',\n    published: 'Published.',\n    publishing: 'Publishing',\n    nonInteractiveNoVersionSpecified: 'You must specify a new version with --new-version when running with --non-interactive.',\n    nonInteractiveNoToken: \"No token found and can't prompt for login when running with --non-interactive.\",\n    infoFail: 'Received invalid response from npm.',\n    malformedRegistryResponse: 'Received malformed response from registry for $0. The registry may be down.',\n    registryNoVersions: 'No valid versions found for $0. The package may be unpublished.',\n    cantRequestOffline: \"Can't make a request in offline mode ($0)\",\n    requestManagerNotSetupHAR: 'RequestManager was not setup to capture HAR files',\n    requestError: 'Request $0 returned a $1',\n    requestFailed: 'Request failed $0',\n    tarballNotInNetworkOrCache: '$0: Tarball is not in network and can not be located in cache ($1)',\n    fetchBadHashWithPath: \"Integrity check failed for $0 (computed integrity doesn't match our records, got $2)\",\n    fetchBadIntegrityAlgorithm: 'Integrity checked failed for $0 (none of the specified algorithms are supported)',\n    fetchErrorCorrupt: '$0. Mirror tarball appears to be corrupt. You can resolve this by running:\\n\\n  rm -rf $1\\n  pika install',\n    errorExtractingTarball: 'Extracting tar content of $1 failed, the file appears to be corrupt: $0',\n    updateInstalling: 'Installing $0...',\n    hostedGitResolveError: 'Error connecting to repository. Please, check the url.',\n    unknownFetcherFor: 'Unknown fetcher for $0',\n    downloadGitWithoutCommit: 'Downloading the git repo $0 over plain git without a commit hash',\n    downloadHTTPWithoutCommit: 'Downloading the git repo $0 over HTTP without a commit hash',\n    unplugDisabled: \"Packages can only be unplugged when Plug'n'Play is enabled.\",\n    plugnplayWindowsSupport: \"Plug'n'Play on Windows doesn't support the cache and project to be kept on separate drives\",\n    packageInstalledWithBinaries: 'Installed $0 with binaries:',\n    packageHasBinaries: '$0 has binaries:',\n    packageHasNoBinaries: '$0 has no binaries',\n    packageBinaryNotFound: \"Couldn't find a binary named $0\",\n    couldBeDeduped: '$0 could be deduped from $1 to $2',\n    lockfileNotContainPattern: 'Lockfile does not contain pattern: $0',\n    integrityCheckFailed: 'Integrity check failed',\n    noIntegrityFile: \"Couldn't find an integrity file\",\n    integrityFailedExpectedIsNotAJSON: 'Integrity check: integrity file is not a json',\n    integrityCheckLinkedModulesDontMatch: \"Integrity check: Linked modules don't match\",\n    integrityFlagsDontMatch: \"Integrity check: Flags don't match\",\n    integrityLockfilesDontMatch: \"Integrity check: Lock files don't match\",\n    integrityFailedFilesMissing: 'Integrity check: Files are missing',\n    integrityPatternsDontMatch: \"Integrity check: Top level patterns don't match\",\n    integrityModulesFoldersMissing: 'Integrity check: Some module folders are missing',\n    integritySystemParamsDontMatch: \"Integrity check: System parameters don't match\",\n    packageNotInstalled: '$0 not installed',\n    optionalDepNotInstalled: 'Optional dependency $0 not installed',\n    packageWrongVersion: '$0 is wrong version: expected $1, got $2',\n    packageDontSatisfy: \"$0 doesn't satisfy found match of $1\",\n    lockfileExists: 'Lockfile already exists, not migrating.',\n    pikaManifestExists: 'pika.package.json manifest already exists, not migrating.',\n    noManifestExists: 'No package.json manifest found. Run `pika init` to generate a new pika.package.json manifest.',\n    skippingImport: 'Skipping import of $0 for $1',\n    importFailed: 'Import of $0 for $1 failed, resolving normally.',\n    importResolveFailed: 'Import of $0 failed starting in $1',\n    importResolvedRangeMatch: 'Using version $0 of $1 instead of $2 for $3',\n    importSourceFilesCorrupted: 'Failed to import from package-lock.json, source file(s) corrupted',\n    importPackageLock: 'found npm package-lock.json, converting to pika.lock',\n    importYarnLock: 'found yarn.lock, converting to pika.lock',\n    importNodeModules: 'creating pika.lock from local node_modules folder',\n    packageContainsPikaAsGlobal: 'Installing Pika via Pika will result in you having two separate versions of Pika installed at the same time, which is not recommended. To update Pika please follow https://yarnpkg.com/en/docs/install .',\n    watchStarting: `Starting up`,\n    watchRunning: `Ready! Watching source tree for changes`,\n    watchRebuild: `Rebuilding...`,\n    watchError: `Build error!`,\n    noValidationErrors: `0 Validation Errors found.`,\n    validationErrors: `$0 Validation Error(s) found. Resolve before publishing.`,\n    scopeNotValid: 'The specified scope is not valid.',\n    deprecatedCommand: '$0 is deprecated. Please use $1.',\n    deprecatedListArgs: 'Filtering by arguments is deprecated. Please use the pattern option instead.',\n    implicitFileDeprecated: 'Using the \"file:\" protocol implicitly is deprecated. Please either prepend the protocol or prepend the path $0 with \"./\".',\n    unsupportedNodeVersion: 'You are using Node $0 which is not supported and may encounter bugs or unexpected behavior. Pika supports the following semver range: $1',\n    verboseUpgradeBecauseRequested: 'Considering upgrade of $0 to $1 because it was directly requested.',\n    verboseUpgradeBecauseOutdated: 'Considering upgrade of $0 to $1 because a newer version exists in the registry.',\n    verboseUpgradeNotUnlocking: 'Not unlocking $0 in the lockfile because it is a new or direct dependency.',\n    verboseUpgradeUnlocking: 'Unlocking $0 in the lockfile.',\n    folderMissing: \"Directory $0 doesn't exist\",\n    mutexPortBusy: 'Cannot use the network mutex on port $0. It is probably used by another app.',\n    auditRunning: 'Auditing packages',\n    auditSummary: '$0 vulnerabilities found - Packages audited: $1',\n    auditSummarySeverity: 'Severity:',\n    auditCritical: '$0 Critical',\n    auditHigh: '$0 High',\n    auditModerate: '$0 Moderate',\n    auditLow: '$0 Low',\n    auditInfo: '$0 Info',\n    auditResolveCommand: '# Run $0 to resolve $1 $2',\n    auditSemverMajorChange: 'SEMVER WARNING: Recommended action is a potentially breaking change',\n    auditManualReview: 'Manual Review\\nSome vulnerabilities require your attention to resolve\\n\\nVisit https://go.npm.me/audit-guide for additional guidance',\n    auditRunAuditForDetails: 'Security audit found potential problems. Run \"pika audit\" for additional details.',\n    auditOffline: 'Skipping audit. Security audit cannot be performed in offline mode.',\n};\nexport default messages;\n","import { defaultFormatter } from './format.js';\nimport * as languages from './lang/index.js';\nimport * as isCI from 'is-ci';\nimport * as os from 'os';\nimport * as util from 'util';\nimport { EventEmitter } from 'events';\nexport function stringifyLangArgs(args) {\n    return args.map(function (val) {\n        if (val != null && val.inspect) {\n            return val.inspect();\n        }\n        else {\n            try {\n                const str = JSON.stringify(val) || val + '';\n                // should match all literal line breaks and\n                // \"u001b\" that follow an odd number of backslashes and convert them to ESC\n                // we do this because the JSON.stringify process has escaped these characters\n                return str\n                    .replace(/((?:^|[^\\\\])(?:\\\\{2})*)\\\\u001[bB]/g, '$1\\u001b')\n                    .replace(/[\\\\]r[\\\\]n|([\\\\])?[\\\\]n/g, (match, precededBacklash) => {\n                    // precededBacklash not null when \"\\n\" is preceded by a backlash (\"\\\\n\")\n                    // match will be \"\\\\n\" and we don't replace it with os.EOL\n                    return precededBacklash ? match : os.EOL;\n                });\n            }\n            catch (e) {\n                return util.inspect(val);\n            }\n        }\n    });\n}\nexport default class BaseReporter {\n    constructor(opts = {}) {\n        const lang = 'en';\n        this.language = lang;\n        this.stdout = opts.stdout || process.stdout;\n        this.stderr = opts.stderr || process.stderr;\n        this.stdin = opts.stdin || this._getStandardInput();\n        this.emoji = !!opts.emoji;\n        this.nonInteractive = !!opts.nonInteractive;\n        this.noProgress = !!opts.noProgress || isCI;\n        this.isVerbose = !!opts.verbose;\n        // @ts-ignore\n        this.isTTY = this.stdout.isTTY;\n        this.peakMemory = 0;\n        this.startTime = Date.now();\n        this.format = defaultFormatter;\n    }\n    lang(key, ...args) {\n        const msg = languages[this.language][key] || languages.en[key];\n        if (!msg) {\n            throw new ReferenceError(`No message defined for language key ${key}`);\n        }\n        // stringify args\n        const stringifiedArgs = stringifyLangArgs(args);\n        // replace $0 placeholders with args\n        return msg.replace(/\\$(\\d+)/g, (str, i) => {\n            return stringifiedArgs[i];\n        });\n    }\n    /**\n     * `stringifyLangArgs` run `JSON.stringify` on strings too causing\n     * them to appear quoted. This marks them as \"raw\" and prevents\n     * the quoting and escaping\n     */\n    rawText(str) {\n        return {\n            inspect() {\n                return str;\n            },\n        };\n    }\n    verbose(msg) {\n        if (this.isVerbose) {\n            this._verbose(msg);\n        }\n    }\n    verboseInspect(val) {\n        if (this.isVerbose) {\n            this._verboseInspect(val);\n        }\n    }\n    _verbose(msg) { }\n    _verboseInspect(val) { }\n    _getStandardInput() {\n        let standardInput;\n        // Accessing stdin in a win32 headless process (e.g., Visual Studio) may throw an exception.\n        try {\n            standardInput = process.stdin;\n        }\n        catch (e) {\n            console.warn(e.message);\n            delete process.stdin;\n            // @ts-ignore\n            process.stdin = new EventEmitter();\n            standardInput = process.stdin;\n        }\n        return standardInput;\n    }\n    initPeakMemoryCounter() {\n        this.checkPeakMemory();\n        this.peakMemoryInterval = setInterval(() => {\n            this.checkPeakMemory();\n        }, 1000);\n        // $FlowFixMe: Node's setInterval returns a Timeout, not a Number\n        this.peakMemoryInterval.unref();\n    }\n    checkPeakMemory() {\n        const { heapTotal } = process.memoryUsage();\n        if (heapTotal > this.peakMemory) {\n            this.peakMemory = heapTotal;\n        }\n    }\n    close() {\n        if (this.peakMemoryInterval) {\n            clearInterval(this.peakMemoryInterval);\n            this.peakMemoryInterval = null;\n        }\n    }\n    getTotalTime() {\n        return Date.now() - this.startTime;\n    }\n    // TODO\n    list(key, items, hints) { }\n    // Outputs basic tree structure to console\n    tree(key, obj, { force = false } = {}) { }\n    // called whenever we begin a step in the CLI.\n    step(current, total, message, emoji) { }\n    // a error message has been triggered. this however does not always meant an abrupt\n    // program end.\n    error(message) { }\n    // an info message has been triggered. this provides things like stats and diagnostics.\n    info(message) { }\n    // a warning message has been triggered.\n    warn(message) { }\n    // a success message has been triggered.\n    success(message) { }\n    // a simple log message\n    // TODO: rethink the {force} parameter. In the meantime, please don't use it (cf comments in #4143).\n    log(message, { force = false } = {}) { }\n    // a shell command has been executed\n    command(command) { }\n    // inspect and pretty-print any value\n    inspect(value) { }\n    // the screen shown at the very start of the CLI\n    header(pkg) { }\n    // the screen shown at the very end of the CLI\n    footer(showPeakMemory) { }\n    // a table structure\n    table(head, body) { }\n    // render an activity spinner and return a function that will trigger an update\n    activity() {\n        return {\n            tick(name) { },\n            end() { },\n        };\n    }\n    //\n    activitySet(total, workers) {\n        return {\n            spinners: Array(workers).fill({\n                clear() { },\n                setPrefix() { },\n                tick() { },\n                end() { },\n            }),\n            end() { },\n        };\n    }\n    // render a progress bar and return a function which when called will trigger an update\n    progress(total) {\n        return function () { };\n    }\n    // utility function to disable progress bar\n    disableProgress() {\n        this.noProgress = true;\n    }\n}\n","// public\nexport function sortTrees(trees) {\n    return trees.sort(function (tree1, tree2) {\n        return tree1.name.localeCompare(tree2.name);\n    });\n}\nexport function recurseTree(tree, prefix, recurseFunc) {\n    const treeLen = tree.length;\n    const treeEnd = treeLen - 1;\n    for (let i = 0; i < treeLen; i++) {\n        const atEnd = i === treeEnd;\n        recurseFunc(tree[i], prefix + getLastIndentChar(atEnd), prefix + getNextIndentChar(atEnd));\n    }\n}\nexport function getFormattedOutput(fmt) {\n    const item = formatColor(fmt.color, fmt.name, fmt.formatter);\n    const suffix = getSuffix(fmt.hint, fmt.formatter);\n    return `${fmt.prefix}─ ${item}${suffix}\\n`;\n}\nfunction getNextIndentChar(end) {\n    return end ? '   ' : '│  ';\n}\nfunction getLastIndentChar(end) {\n    return end ? '└' : '├';\n}\nfunction getSuffix(hint, formatter) {\n    return hint ? ` (${formatter.grey(hint)})` : '';\n}\nfunction formatColor(color, strToFormat, formatter) {\n    return color ? formatter[color](strToFormat) : strToFormat;\n}\n","import * as tty from 'tty';\nimport * as readline from 'readline';\nimport chalk from 'chalk';\nconst CLEAR_WHOLE_LINE = 0;\nconst CLEAR_RIGHT_OF_CURSOR = 1;\nexport function clearLine(stdout) {\n    if (!chalk.supportsColor) {\n        if (stdout instanceof tty.WriteStream) {\n            if (stdout.columns > 0) {\n                stdout.write(`\\r${' '.repeat(stdout.columns - 1)}`);\n            }\n            stdout.write(`\\r`);\n        }\n        return;\n    }\n    readline.clearLine(stdout, CLEAR_WHOLE_LINE);\n    readline.cursorTo(stdout, 0);\n}\nexport function toStartOfLine(stdout) {\n    if (!chalk.supportsColor) {\n        stdout.write('\\r');\n        return;\n    }\n    readline.cursorTo(stdout, 0);\n}\nexport function writeOnNthLine(stdout, n, msg) {\n    if (!chalk.supportsColor) {\n        return;\n    }\n    if (n == 0) {\n        readline.cursorTo(stdout, 0);\n        stdout.write(msg);\n        readline.clearLine(stdout, CLEAR_RIGHT_OF_CURSOR);\n        return;\n    }\n    readline.cursorTo(stdout, 0);\n    readline.moveCursor(stdout, 0, -n);\n    stdout.write(msg);\n    readline.clearLine(stdout, CLEAR_RIGHT_OF_CURSOR);\n    readline.cursorTo(stdout, 0);\n    readline.moveCursor(stdout, 0, n);\n}\nexport function clearNthLine(stdout, n) {\n    if (!chalk.supportsColor) {\n        return;\n    }\n    if (n == 0) {\n        clearLine(stdout);\n        return;\n    }\n    readline.cursorTo(stdout, 0);\n    readline.moveCursor(stdout, 0, -n);\n    readline.clearLine(stdout, CLEAR_WHOLE_LINE);\n    readline.moveCursor(stdout, 0, n);\n}\n","import { clearLine, toStartOfLine } from './util.js';\nexport default class ProgressBar {\n    constructor(total, stdout = process.stderr, callback) {\n        this.stdout = stdout;\n        this.total = total;\n        this.chars = ProgressBar.bars[0];\n        this.delay = 60;\n        this.curr = 0;\n        this._callback = callback;\n        clearLine(stdout);\n    }\n    tick() {\n        if (this.curr >= this.total) {\n            return;\n        }\n        this.curr++;\n        // schedule render\n        if (!this.id) {\n            this.id = setTimeout(() => this.render(), this.delay);\n        }\n    }\n    cancelTick() {\n        if (this.id) {\n            clearTimeout(this.id);\n            this.id = null;\n        }\n    }\n    stop() {\n        // \"stop\" by setting current to end so `tick` becomes noop\n        this.curr = this.total;\n        this.cancelTick();\n        clearLine(this.stdout);\n        if (this._callback) {\n            this._callback(this);\n        }\n    }\n    render() {\n        // clear throttle\n        this.cancelTick();\n        let ratio = this.curr / this.total;\n        ratio = Math.min(Math.max(ratio, 0), 1);\n        // progress without bar\n        let bar = ` ${this.curr}/${this.total}`;\n        // calculate size of actual bar\n        // $FlowFixMe: investigate process.stderr.columns flow error\n        // @ts-ignore\n        const availableSpace = Math.max(0, this.stdout.columns - bar.length - 3);\n        const width = Math.min(this.total, availableSpace);\n        const completeLength = Math.round(width * ratio);\n        const complete = this.chars[0].repeat(completeLength);\n        const incomplete = this.chars[1].repeat(width - completeLength);\n        bar = `[${complete}${incomplete}]${bar}`;\n        toStartOfLine(this.stdout);\n        this.stdout.write(bar);\n    }\n}\nProgressBar.bars = [['#', '-']];\n","import { writeOnNthLine, clearNthLine } from './util.js';\nexport default class Spinner {\n    constructor(stdout = process.stderr, lineNumber = 0) {\n        this.current = 0;\n        this.prefix = '';\n        this.lineNumber = lineNumber;\n        this.stdout = stdout;\n        this.delay = 60;\n        this.chars = Spinner.spinners[28].split('');\n        this.text = '';\n        this.id = null;\n    }\n    setPrefix(prefix) {\n        this.prefix = prefix;\n    }\n    setText(text) {\n        this.text = text;\n    }\n    start() {\n        this.current = 0;\n        this.render();\n    }\n    render() {\n        if (this.id) {\n            clearTimeout(this.id);\n        }\n        // build line ensuring we don't wrap to the next line\n        let msg = `${this.prefix}${this.chars[this.current]} ${this.text}`;\n        // @ts-ignore\n        const columns = typeof this.stdout.columns === 'number' ? this.stdout.columns : 100;\n        msg = msg.slice(0, columns);\n        writeOnNthLine(this.stdout, this.lineNumber, msg);\n        this.current = ++this.current % this.chars.length;\n        this.id = setTimeout(() => this.render(), this.delay);\n    }\n    stop() {\n        if (this.id) {\n            clearTimeout(this.id);\n            this.id = null;\n        }\n        clearNthLine(this.stdout, this.lineNumber);\n    }\n}\nSpinner.spinners = [\n    '|/-\\\\',\n    '⠂-–—–-',\n    '◐◓◑◒',\n    '◴◷◶◵',\n    '◰◳◲◱',\n    '▖▘▝▗',\n    '■□▪▫',\n    '▌▀▐▄',\n    '▉▊▋▌▍▎▏▎▍▌▋▊▉',\n    '▁▃▄▅▆▇█▇▆▅▄▃',\n    '←↖↑↗→↘↓↙',\n    '┤┘┴└├┌┬┐',\n    '◢◣◤◥',\n    '.oO°Oo.',\n    '.oO@*',\n    '🌍🌎🌏',\n    '◡◡ ⊙⊙ ◠◠',\n    '☱☲☴',\n    '⠋⠙⠹⠸⠼⠴⠦⠧⠇⠏',\n    '⠋⠙⠚⠞⠖⠦⠴⠲⠳⠓',\n    '⠄⠆⠇⠋⠙⠸⠰⠠⠰⠸⠙⠋⠇⠆',\n    '⠋⠙⠚⠒⠂⠂⠒⠲⠴⠦⠖⠒⠐⠐⠒⠓⠋',\n    '⠁⠉⠙⠚⠒⠂⠂⠒⠲⠴⠤⠄⠄⠤⠴⠲⠒⠂⠂⠒⠚⠙⠉⠁',\n    '⠈⠉⠋⠓⠒⠐⠐⠒⠖⠦⠤⠠⠠⠤⠦⠖⠒⠐⠐⠒⠓⠋⠉⠈',\n    '⠁⠁⠉⠙⠚⠒⠂⠂⠒⠲⠴⠤⠄⠄⠤⠠⠠⠤⠦⠖⠒⠐⠐⠒⠓⠋⠉⠈⠈',\n    '⢄⢂⢁⡁⡈⡐⡠',\n    '⢹⢺⢼⣸⣇⡧⡗⡏',\n    '⣾⣽⣻⢿⡿⣟⣯⣷',\n    '⠁⠂⠄⡀⢀⠠⠐⠈',\n];\n","import chalk from 'chalk';\nimport * as readline from 'readline';\nimport stripAnsi from 'strip-ansi';\nimport { inspect } from 'util';\nimport { removeSuffix } from '../../util/misc.js';\nimport BaseReporter from '../base-reporter.js';\nimport { getFormattedOutput, recurseTree, sortTrees } from './helpers/tree-helper.js';\nimport Progress from './progress-bar.js';\nimport Spinner from './spinner-progress.js';\nimport { clearLine } from './util.js';\nconst AUDIT_COL_WIDTHS = [15, 62];\nconst auditSeverityColors = {\n    info: chalk.bold,\n    low: chalk.bold,\n    moderate: chalk.yellow,\n    high: chalk.red,\n    critical: chalk.bgRed,\n};\n// fixes bold on windows\nif (process.platform === 'win32' && !(process.env.TERM && /^xterm/i.test(process.env.TERM))) {\n    // @ts-ignore\n    chalk.bold._styles[0].close += '\\u001b[m';\n}\nexport default class ConsoleReporter extends BaseReporter {\n    constructor(opts) {\n        super(opts);\n        this._lastCategorySize = 0;\n        this._spinners = new Set();\n        this.format = chalk;\n        this.format.stripColor = stripAnsi;\n        this.isSilent = !!opts.isSilent;\n    }\n    _prependEmoji(msg, emoji) {\n        if (this.emoji && emoji && this.isTTY) {\n            msg = `${emoji}  ${msg}`;\n        }\n        return msg;\n    }\n    _logCategory(category, color, msg) {\n        this._lastCategorySize = category.length;\n        this._log(`${this.format[color](category)} ${msg}`);\n    }\n    _verbose(msg) {\n        this._logCategory('verbose', 'grey', `${process.uptime()} ${msg}`);\n    }\n    _verboseInspect(obj) {\n        this.inspect(obj);\n    }\n    close() {\n        for (const spinner of this._spinners) {\n            spinner.stop();\n        }\n        this._spinners.clear();\n        this.stopProgress();\n        super.close();\n    }\n    table(head, body) {\n        //\n        head = head.map((field) => this.format.underline(field));\n        //\n        const rows = [head].concat(body);\n        // get column widths\n        const cols = [];\n        for (let i = 0; i < head.length; i++) {\n            const widths = rows.map((row) => this.format.stripColor(row[i]).length);\n            cols[i] = Math.max(...widths);\n        }\n        //\n        const builtRows = rows.map((row) => {\n            for (let i = 0; i < row.length; i++) {\n                const field = row[i];\n                const padding = cols[i] - this.format.stripColor(field).length;\n                row[i] = field + ' '.repeat(padding);\n            }\n            return row.join(' ');\n        });\n        this.log(builtRows.join('\\n'));\n    }\n    step(current, total, msg, emoji) {\n        msg = this._prependEmoji(msg, emoji);\n        if (msg.endsWith('?')) {\n            msg = `${removeSuffix(msg, '?')}...?`;\n        }\n        else {\n            msg += '...';\n        }\n        this.log(`${this.format.dim(`[${current}/${total}]`)} ${msg}`);\n    }\n    inspect(value) {\n        if (typeof value !== 'number' && typeof value !== 'string') {\n            value = inspect(value, {\n                breakLength: 0,\n                colors: this.isTTY,\n                depth: null,\n                maxArrayLength: null,\n            });\n        }\n        this.log(String(value), { force: true });\n    }\n    list(key, items, hints) {\n        const gutterWidth = (this._lastCategorySize || 2) - 1;\n        if (hints) {\n            for (const item of items) {\n                this._log(`${' '.repeat(gutterWidth)}- ${this.format.bold(item)}`);\n                this._log(`  ${' '.repeat(gutterWidth)} ${hints[item]}`);\n            }\n        }\n        else {\n            for (const item of items) {\n                this._log(`${' '.repeat(gutterWidth)}- ${item}`);\n            }\n        }\n    }\n    header(pkg) {\n        this.log(this.format.bold(`${pkg.name} v${pkg.version}`));\n    }\n    footer(showPeakMemory) {\n        this.stopProgress();\n        const totalTime = (this.getTotalTime() / 1000).toFixed(2);\n        let msg = `Done in ${totalTime}s.`;\n        if (showPeakMemory) {\n            const peakMemory = (this.peakMemory / 1024 / 1024).toFixed(2);\n            msg += ` Peak memory usage ${peakMemory}MB.`;\n        }\n        this.log(this._prependEmoji(msg, '✨'));\n    }\n    log(msg, { force = false } = {}) {\n        this._lastCategorySize = 0;\n        this._log(msg, { force });\n    }\n    _log(msg, { force = false } = {}) {\n        if (this.isSilent && !force) {\n            return;\n        }\n        clearLine(this.stdout);\n        this.stdout.write(`${msg}\\n`);\n    }\n    success(msg) {\n        this._logCategory('success', 'green', msg);\n    }\n    error(msg) {\n        clearLine(this.stderr);\n        this.stderr.write(`${this.format.red('error')} ${msg}\\n`);\n    }\n    info(msg) {\n        this._logCategory('info', 'blue', msg);\n    }\n    command(command) {\n        this.log(this.format.dim(`$ ${command}`));\n    }\n    warn(msg) {\n        clearLine(this.stderr);\n        this.stderr.write(`${this.format.yellow('warning')} ${msg}\\n`);\n    }\n    // handles basic tree output to console\n    tree(key, trees, { force = false } = {}) {\n        this.stopProgress();\n        //\n        if (this.isSilent && !force) {\n            return;\n        }\n        const output = ({ name, children, hint, color }, titlePrefix, childrenPrefix) => {\n            const formatter = this.format;\n            const out = getFormattedOutput({\n                prefix: titlePrefix,\n                hint,\n                color,\n                name,\n                formatter,\n            });\n            this.stdout.write(out);\n            if (children && children.length) {\n                recurseTree(sortTrees(children), childrenPrefix, output);\n            }\n        };\n        recurseTree(sortTrees(trees), '', output);\n    }\n    activitySet(total, workers) {\n        if (!this.isTTY || this.noProgress) {\n            return super.activitySet(total, workers);\n        }\n        const spinners = [];\n        const reporterSpinners = this._spinners;\n        for (let i = 1; i < workers; i++) {\n            this.log('');\n        }\n        for (let i = 0; i < workers; i++) {\n            const spinner = new Spinner(this.stderr, i);\n            reporterSpinners.add(spinner);\n            spinner.start();\n            let prefix = null;\n            let current = 0;\n            const updatePrefix = () => {\n                spinner.setPrefix(`${this.format.dim(`[${current === 0 ? '-' : current}/${total}]`)} `);\n            };\n            const clear = () => {\n                prefix = null;\n                current = 0;\n                updatePrefix();\n                spinner.setText('waiting...');\n            };\n            clear();\n            spinners.unshift({\n                clear,\n                setPrefix(_current, _prefix) {\n                    current = _current;\n                    prefix = _prefix;\n                    spinner.setText(prefix);\n                    updatePrefix();\n                },\n                tick(msg) {\n                    if (prefix) {\n                        msg = `${prefix}: ${msg}`;\n                    }\n                    spinner.setText(msg);\n                },\n                end() {\n                    spinner.stop();\n                    reporterSpinners.delete(spinner);\n                },\n            });\n        }\n        return {\n            spinners,\n            end: () => {\n                for (const spinner of spinners) {\n                    spinner.end();\n                }\n                readline.moveCursor(this.stdout, 0, -workers + 1);\n            },\n        };\n    }\n    activity() {\n        if (!this.isTTY) {\n            return {\n                tick() { },\n                end() { },\n            };\n        }\n        const reporterSpinners = this._spinners;\n        const spinner = new Spinner(this.stderr);\n        spinner.start();\n        reporterSpinners.add(spinner);\n        return {\n            tick(name) {\n                spinner.setText(name);\n            },\n            end() {\n                spinner.stop();\n                reporterSpinners.delete(spinner);\n            },\n        };\n    }\n    progress(count) {\n        if (this.noProgress || count <= 0) {\n            return function () {\n                // noop\n            };\n        }\n        if (!this.isTTY) {\n            return function () {\n                // TODO what should the behaviour here be? we could buffer progress messages maybe\n            };\n        }\n        // Clear any potentially old progress bars\n        this.stopProgress();\n        const bar = (this._progressBar = new Progress(count, this.stderr, (progress) => {\n            if (progress === this._progressBar) {\n                this._progressBar = null;\n            }\n        }));\n        bar.render();\n        return function () {\n            bar.tick();\n        };\n    }\n    stopProgress() {\n        if (this._progressBar) {\n            this._progressBar.stop();\n        }\n    }\n}\n","import BaseReporter from './base-reporter.js';\nexport default class JSONReporter extends BaseReporter {\n    constructor(opts) {\n        super(opts);\n        this._activityId = 0;\n        this._progressId = 0;\n    }\n    _dump(type, data, error) {\n        let stdout = this.stdout;\n        if (error) {\n            stdout = this.stderr;\n        }\n        stdout.write(`${JSON.stringify({ type, data })}\\n`);\n    }\n    _verbose(msg) {\n        this._dump('verbose', msg);\n    }\n    list(type, items, hints) {\n        this._dump('list', { type, items, hints });\n    }\n    tree(type, trees) {\n        this._dump('tree', { type, trees });\n    }\n    step(current, total, message) {\n        this._dump('step', { message, current, total });\n    }\n    inspect(value) {\n        this._dump('inspect', value);\n    }\n    footer(showPeakMemory) {\n        this._dump('finished', this.getTotalTime());\n    }\n    log(msg) {\n        this._dump('log', msg);\n    }\n    command(msg) {\n        this._dump('command', msg);\n    }\n    table(head, body) {\n        this._dump('table', { head, body });\n    }\n    success(msg) {\n        this._dump('success', msg);\n    }\n    error(msg) {\n        this._dump('error', msg, true);\n    }\n    warn(msg) {\n        this._dump('warning', msg, true);\n    }\n    info(msg) {\n        this._dump('info', msg);\n    }\n    activitySet(total, workers) {\n        if (!this.isTTY || this.noProgress) {\n            return super.activitySet(total, workers);\n        }\n        const id = this._activityId++;\n        this._dump('activitySetStart', { id, total, workers });\n        const spinners = [];\n        for (let i = 0; i < workers; i++) {\n            let current = 0;\n            let header = '';\n            spinners.push({\n                clear() { },\n                setPrefix(_current, _header) {\n                    current = _current;\n                    header = _header;\n                },\n                tick: msg => {\n                    this._dump('activitySetTick', {\n                        id,\n                        header,\n                        current,\n                        worker: i,\n                        message: msg,\n                    });\n                },\n                end() { },\n            });\n        }\n        return {\n            spinners,\n            end: () => {\n                this._dump('activitySetEnd', { id });\n            },\n        };\n    }\n    activity() {\n        return this._activity({});\n    }\n    _activity(data) {\n        if (!this.isTTY || this.noProgress) {\n            return {\n                tick() { },\n                end() { },\n            };\n        }\n        const id = this._activityId++;\n        this._dump('activityStart', { id, ...data });\n        return {\n            tick: (name) => {\n                this._dump('activityTick', { id, name });\n            },\n            end: () => {\n                this._dump('activityEnd', { id });\n            },\n        };\n    }\n    progress(total) {\n        if (this.noProgress) {\n            return function () {\n                // noop\n            };\n        }\n        const id = this._progressId++;\n        let current = 0;\n        this._dump('progressStart', { id, total });\n        return () => {\n            current++;\n            this._dump('progressTick', { id, current });\n            if (current === total) {\n                this._dump('progressFinish', { id });\n            }\n        };\n    }\n}\n","// import os from 'os';\n// import * as path from 'path';\n// import userHome from './util/user-home-dir.js';\n// import {getCacheDir, getConfigDir, getDataDir} from './util/user-dirs.js';\nexport const DEPENDENCY_TYPES = ['devDependencies', 'dependencies', 'legacyDependencies'];\n// export const OWNED_DEPENDENCY_TYPES = ['devDependencies', 'dependencies', 'legacyDependencies'];\nexport const RESOLUTIONS = 'resolutions';\nexport const MANIFEST_FIELDS = [RESOLUTIONS, ...DEPENDENCY_TYPES];\nexport const SUPPORTED_NODE_VERSIONS = '>=8.5.0';\n// export const PIKA_REGISTRY = 'https://registry.npmjs.org';\n// export const NPM_REGISTRY_RE = /https?:\\/\\/registry\\.npmjs\\.org/g;\n// export const PIKA_DOCS = 'https://yarnpkg.com/en/docs/cli/';\n// export const PIKA_INSTALLER_SH = 'https://yarnpkg.com/install.sh';\n// export const PIKA_INSTALLER_MSI = 'https://yarnpkg.com/latest.msi';\n// export const SELF_UPDATE_VERSION_URL = 'https://www.pikapkg.com/downloads/latest-version';\n// // cache version, bump whenever we make backwards incompatible changes\n// export const CACHE_VERSION = 3;\n// // lockfile version, bump whenever we make backwards incompatible changes\n// export const LOCKFILE_VERSION = 1;\n// // max amount of network requests to perform concurrently\n// export const NETWORK_CONCURRENCY = 8;\n// // HTTP timeout used when downloading packages\n// export const NETWORK_TIMEOUT = 30 * 1000; // in milliseconds\n// // max amount of child processes to execute concurrently\nexport const CHILD_CONCURRENCY = 5;\n// export const REQUIRED_PACKAGE_KEYS = ['name', 'version', '_uid'];\n// function getPreferredCacheDirectories(): Array<string> {\n//   const preferredCacheDirectories = [getCacheDir()];\n//   if (process.getuid) {\n//     // $FlowFixMe: process.getuid exists, dammit\n//     preferredCacheDirectories.push(path.join(os.tmpdir(), `.pika-cache-${process.getuid()}`));\n//   }\n//   preferredCacheDirectories.push(path.join(os.tmpdir(), `.pika-cache`));\n//   return preferredCacheDirectories;\n// }\n// export const PREFERRED_MODULE_CACHE_DIRECTORIES = getPreferredCacheDirectories();\n// export const CONFIG_DIRECTORY = getConfigDir();\n// export const DATA_DIRECTORY = getDataDir();\n// export const LINK_REGISTRY_DIRECTORY = path.join(DATA_DIRECTORY, 'link');\n// export const GLOBAL_MODULE_DIRECTORY = path.join(DATA_DIRECTORY, 'global');\n// export const NODE_BIN_PATH = process.execPath;\nexport const NODE_MODULES_FOLDER = 'node_modules';\nexport const NODE_PACKAGE_JSON = 'package.json';\n// export const PNP_FILENAME = '.pnp';\n// export const POSIX_GLOBAL_PREFIX = `${process.env.DESTDIR || ''}/usr/local`;\n// export const FALLBACK_GLOBAL_PREFIX = path.join(userHome, '.pika');\n// export const META_FOLDER = '.pika-meta';\n// export const INTEGRITY_FILENAME = '.pika-integrity';\n// export const LOCKFILE_FILENAME = 'pika.lock';\n// export const LEGACY_LOCKFILE_FILENAME = 'yarn.lock';\n// export const METADATA_FILENAME = '.pika-metadata.json';\n// export const TARBALL_FILENAME = '.pika-tarball.tgz';\n// export const CLEAN_FILENAME = '.pikaclean';\n// export const NPM_LOCK_FILENAME = 'package-lock.json';\n// export const NPM_SHRINKWRAP_FILENAME = 'npm-shrinkwrap.json';\nexport const DEFAULT_INDENT = '  ';\n// export const SINGLE_INSTANCE_PORT = 31997;\n// export const SINGLE_INSTANCE_FILENAME = '.pika-single-instance';\nexport const ENV_PATH_KEY = getPathKey(process.platform, process.env);\nexport function getPathKey(platform, env) {\n    let pathKey = 'PATH';\n    // windows calls its path \"Path\" usually, but this is not guaranteed.\n    if (platform === 'win32') {\n        pathKey = 'Path';\n        for (const key in env) {\n            if (key.toLowerCase() === 'path') {\n                pathKey = key;\n            }\n        }\n    }\n    return pathKey;\n}\n// export const VERSION_COLOR_SCHEME: {[key: string]: VersionColor} = {\n//   major: 'red',\n//   premajor: 'red',\n//   minor: 'yellow',\n//   preminor: 'yellow',\n//   patch: 'green',\n//   prepatch: 'green',\n//   prerelease: 'red',\n//   unchanged: 'white',\n//   unknown: 'red',\n// };\n// export type VersionColor = 'red' | 'yellow' | 'green' | 'white';\n// export type RequestHint = 'dev' | 'optional' | 'resolution' | 'workspaces';\n","export default function nullify(obj) {\n    if (Array.isArray(obj)) {\n        for (const item of obj) {\n            nullify(item);\n        }\n    }\n    else if ((obj !== null && typeof obj === 'object') || typeof obj === 'function') {\n        Object.setPrototypeOf(obj, null);\n        // for..in can only be applied to 'object', not 'function'\n        if (typeof obj === 'object') {\n            for (const key in obj) {\n                nullify(obj[key]);\n            }\n        }\n    }\n    return obj;\n}\n","import { promisify } from 'util';\nimport _rimraf from 'rimraf';\nimport _mkdirp from 'mkdirp';\nimport _glob from 'glob';\nexport const unlink = promisify(_rimraf);\nexport const glob = promisify(_glob);\nexport const mkdirp = promisify(_mkdirp);\n//\n// import {ReadStream} from 'fs';\n// import Reporter from '../reporters/base-reporter.js';\n// import {CopyFileAction} from './fs-normalized.js';\nimport * as os from 'os';\nimport * as path from 'path';\n// import BlockingQueue from './blocking-queue.js';\n// import * as promise from './promise.js';\nimport map from './map.js';\n// import {copyFile, fileDatesEqual, unlink} from './fs-normalized.js';\n// export const constants =\n//   typeof fs.constants !== 'undefined'\n//     ? fs.constants\n//     : {\n//         R_OK: fs.R_OK,\n//         W_OK: fs.W_OK,\n//         X_OK: fs.X_OK,\n//       };\n// export const lockQueue = new BlockingQueue('fs lock');\nimport * as fs from 'fs';\nimport * as util from 'util';\nexport const open = util.promisify(fs.open);\nexport const writeFile = util.promisify(fs.writeFile);\nexport const readlink = util.promisify(fs.readlink);\nexport const realpath = util.promisify(fs.realpath);\nexport const readdir = util.promisify(fs.readdir);\nexport const rename = util.promisify(fs.rename);\nexport const access = util.promisify(fs.access);\nexport const stat = util.promisify(fs.stat);\nexport const exists = util.promisify(fs.exists);\nexport const lstat = util.promisify(fs.lstat);\nexport const chmod = util.promisify(fs.chmod);\nexport const link = util.promisify(fs.link);\nexport const copyFile = util.promisify(fs.copyFile);\nconst readFileBuffer = util.promisify(fs.readFile);\nexport const readFile = (path) => {\n    return util.promisify(fs.readFile)(path, { encoding: 'utf-8' });\n};\n// export {unlink};\n// // fs.copyFile uses the native file copying instructions on the system, performing much better\n// // than any JS-based solution and consumes fewer resources. Repeated testing to fine tune the\n// // concurrency level revealed 128 as the sweet spot on a quad-core, 16 CPU Intel system with SSD.\n// const CONCURRENT_QUEUE_ITEMS = fs.copyFile ? 128 : 4;\n// const fsSymlink: (target: string, path: string, type?: 'dir' | 'file' | 'junction') => Promise<void> = promisify(\n//   fs.symlink,\n// );\n// import invariant from 'invariant';\nimport stripBOM from 'strip-bom';\n// const noop = () => {};\n// export type CopyQueueItem = {\n//   src: string,\n//   dest: string,\n//   type?: string,\n//   onFresh?: () => void,\n//   onDone?: () => void,\n// };\n// type CopyQueue = Array<CopyQueueItem>;\n// type LinkFileAction = {\n//   src: string,\n//   dest: string,\n//   removeDest: boolean,\n// };\n// type CopySymlinkAction = {\n//   dest: string,\n//   linkname: string,\n// };\n// type CopyActions = {\n//   file: Array<CopyFileAction>,\n//   symlink: Array<CopySymlinkAction>,\n//   link: Array<LinkFileAction>,\n// };\n// type CopyOptions = {\n//   onProgress: (dest: string) => void,\n//   onStart: (num: number) => void,\n//   possibleExtraneous: Set<string>,\n//   ignoreBasenames: Array<string>,\n//   artifactFiles: Array<string>,\n// };\n// type FailedFolderQuery = {\n//   error: Error,\n//   folder: string,\n// };\n// type FolderQueryResult = {\n//   skipped: Array<FailedFolderQuery>,\n//   folder?: string,\n// };\n// async function buildActionsForCopy(\n//   queue: CopyQueue,\n//   events: CopyOptions,\n//   possibleExtraneous: Set<string>,\n//   reporter: Reporter,\n// ): Promise<CopyActions> {\n//   const artifactFiles: Set<string> = new Set(events.artifactFiles || []);\n//   const files: Set<string> = new Set();\n//   // initialise events\n//   for (const item of queue) {\n//     const onDone = item.onDone;\n//     item.onDone = () => {\n//       events.onProgress(item.dest);\n//       if (onDone) {\n//         onDone();\n//       }\n//     };\n//   }\n//   events.onStart(queue.length);\n//   // start building actions\n//   const actions: CopyActions = {\n//     file: [],\n//     symlink: [],\n//     link: [],\n//   };\n//   // custom concurrency logic as we're always executing stacks of CONCURRENT_QUEUE_ITEMS queue items\n//   // at a time due to the requirement to push items onto the queue\n//   while (queue.length) {\n//     const items = queue.splice(0, CONCURRENT_QUEUE_ITEMS);\n//     await Promise.all(items.map(build));\n//   }\n//   // simulate the existence of some files to prevent considering them extraneous\n//   for (const file of artifactFiles) {\n//     if (possibleExtraneous.has(file)) {\n//       reporter.verbose(reporter.lang('verboseFilePhantomExtraneous', file));\n//       possibleExtraneous.delete(file);\n//     }\n//   }\n//   for (const loc of possibleExtraneous) {\n//     if (files.has(loc.toLowerCase())) {\n//       possibleExtraneous.delete(loc);\n//     }\n//   }\n//   return actions;\n//   //\n//   async function build(data: CopyQueueItem): Promise<void> {\n//     const {src, dest, type} = data;\n//     const onFresh = data.onFresh || noop;\n//     const onDone = data.onDone || noop;\n//     // TODO https://github.com/yarnpkg/yarn/issues/3751\n//     // related to bundled dependencies handling\n//     if (files.has(dest.toLowerCase())) {\n//       reporter.verbose(`The case-insensitive file ${dest} shouldn't be copied twice in one bulk copy`);\n//     } else {\n//       files.add(dest.toLowerCase());\n//     }\n//     if (type === 'symlink') {\n//       await mkdirp(path.dirname(dest));\n//       onFresh();\n//       actions.symlink.push({\n//         dest,\n//         linkname: src,\n//       });\n//       onDone();\n//       return;\n//     }\n//     if (events.ignoreBasenames.indexOf(path.basename(src)) >= 0) {\n//       // ignored file\n//       return;\n//     }\n//     const srcStat = await lstat(src);\n//     let srcFiles;\n//     if (srcStat.isDirectory()) {\n//       srcFiles = await readdir(src);\n//     }\n//     let destStat;\n//     try {\n//       // try accessing the destination\n//       destStat = await lstat(dest);\n//     } catch (e) {\n//       // proceed if destination doesn't exist, otherwise error\n//       if (e.code !== 'ENOENT') {\n//         throw e;\n//       }\n//     }\n//     // if destination exists\n//     if (destStat) {\n//       const bothSymlinks = srcStat.isSymbolicLink() && destStat.isSymbolicLink();\n//       const bothFolders = srcStat.isDirectory() && destStat.isDirectory();\n//       const bothFiles = srcStat.isFile() && destStat.isFile();\n//       // EINVAL access errors sometimes happen which shouldn't because node shouldn't be giving\n//       // us modes that aren't valid. investigate this, it's generally safe to proceed.\n//       /* if (srcStat.mode !== destStat.mode) {\n//         try {\n//           await access(dest, srcStat.mode);\n//         } catch (err) {}\n//       } */\n//       if (bothFiles && artifactFiles.has(dest)) {\n//         // this file gets changed during build, likely by a custom install script. Don't bother checking it.\n//         onDone();\n//         reporter.verbose(reporter.lang('verboseFileSkipArtifact', src));\n//         return;\n//       }\n//       if (bothFiles && srcStat.size === destStat.size && fileDatesEqual(srcStat.mtime, destStat.mtime)) {\n//         // we can safely assume this is the same file\n//         onDone();\n//         reporter.verbose(reporter.lang('verboseFileSkip', src, dest, srcStat.size, +srcStat.mtime));\n//         return;\n//       }\n//       if (bothSymlinks) {\n//         const srcReallink = await readlink(src);\n//         if (srcReallink === (await readlink(dest))) {\n//           // if both symlinks are the same then we can continue on\n//           onDone();\n//           reporter.verbose(reporter.lang('verboseFileSkipSymlink', src, dest, srcReallink));\n//           return;\n//         }\n//       }\n//       if (bothFolders) {\n//         // mark files that aren't in this folder as possibly extraneous\n//         const destFiles = await readdir(dest);\n//         invariant(srcFiles, 'src files not initialised');\n//         for (const file of destFiles) {\n//           if (srcFiles.indexOf(file) < 0) {\n//             const loc = path.join(dest, file);\n//             possibleExtraneous.add(loc);\n//             if ((await lstat(loc)).isDirectory()) {\n//               for (const file of await readdir(loc)) {\n//                 possibleExtraneous.add(path.join(loc, file));\n//               }\n//             }\n//           }\n//         }\n//       }\n//     }\n//     if (destStat && destStat.isSymbolicLink()) {\n//       await unlink(dest);\n//       destStat = null;\n//     }\n//     if (srcStat.isSymbolicLink()) {\n//       onFresh();\n//       const linkname = await readlink(src);\n//       actions.symlink.push({\n//         dest,\n//         linkname,\n//       });\n//       onDone();\n//     } else if (srcStat.isDirectory()) {\n//       if (!destStat) {\n//         reporter.verbose(reporter.lang('verboseFileFolder', dest));\n//         await mkdirp(dest);\n//       }\n//       const destParts = dest.split(path.sep);\n//       while (destParts.length) {\n//         files.add(destParts.join(path.sep).toLowerCase());\n//         destParts.pop();\n//       }\n//       // push all files to queue\n//       invariant(srcFiles, 'src files not initialised');\n//       let remaining = srcFiles.length;\n//       if (!remaining) {\n//         onDone();\n//       }\n//       for (const file of srcFiles) {\n//         queue.push({\n//           dest: path.join(dest, file),\n//           onFresh,\n//           onDone: () => {\n//             if (--remaining === 0) {\n//               onDone();\n//             }\n//           },\n//           src: path.join(src, file),\n//         });\n//       }\n//     } else if (srcStat.isFile()) {\n//       onFresh();\n//       actions.file.push({\n//         src,\n//         dest,\n//         atime: srcStat.atime,\n//         mtime: srcStat.mtime,\n//         mode: srcStat.mode,\n//       });\n//       onDone();\n//     } else {\n//       throw new Error(`unsure how to copy this: ${src}`);\n//     }\n//   }\n// }\n// async function buildActionsForHardlink(\n//   queue: CopyQueue,\n//   events: CopyOptions,\n//   possibleExtraneous: Set<string>,\n//   reporter: Reporter,\n// ): Promise<CopyActions> {\n//   const artifactFiles: Set<string> = new Set(events.artifactFiles || []);\n//   const files: Set<string> = new Set();\n//   // initialise events\n//   for (const item of queue) {\n//     const onDone = item.onDone || noop;\n//     item.onDone = () => {\n//       events.onProgress(item.dest);\n//       onDone();\n//     };\n//   }\n//   events.onStart(queue.length);\n//   // start building actions\n//   const actions: CopyActions = {\n//     file: [],\n//     symlink: [],\n//     link: [],\n//   };\n//   // custom concurrency logic as we're always executing stacks of CONCURRENT_QUEUE_ITEMS queue items\n//   // at a time due to the requirement to push items onto the queue\n//   while (queue.length) {\n//     const items = queue.splice(0, CONCURRENT_QUEUE_ITEMS);\n//     await Promise.all(items.map(build));\n//   }\n//   // simulate the existence of some files to prevent considering them extraneous\n//   for (const file of artifactFiles) {\n//     if (possibleExtraneous.has(file)) {\n//       reporter.verbose(reporter.lang('verboseFilePhantomExtraneous', file));\n//       possibleExtraneous.delete(file);\n//     }\n//   }\n//   for (const loc of possibleExtraneous) {\n//     if (files.has(loc.toLowerCase())) {\n//       possibleExtraneous.delete(loc);\n//     }\n//   }\n//   return actions;\n//   //\n//   async function build(data: CopyQueueItem): Promise<void> {\n//     const {src, dest} = data;\n//     const onFresh = data.onFresh || noop;\n//     const onDone = data.onDone || noop;\n//     if (files.has(dest.toLowerCase())) {\n//       // Fixes issue https://github.com/yarnpkg/yarn/issues/2734\n//       // When bulk hardlinking we have A -> B structure that we want to hardlink to A1 -> B1,\n//       // package-linker passes that modules A1 and B1 need to be hardlinked,\n//       // the recursive linking algorithm of A1 ends up scheduling files in B1 to be linked twice which will case\n//       // an exception.\n//       onDone();\n//       return;\n//     }\n//     files.add(dest.toLowerCase());\n//     if (events.ignoreBasenames.indexOf(path.basename(src)) >= 0) {\n//       // ignored file\n//       return;\n//     }\n//     const srcStat = await lstat(src);\n//     let srcFiles;\n//     if (srcStat.isDirectory()) {\n//       srcFiles = await readdir(src);\n//     }\n//     const destExists = await exists(dest);\n//     if (destExists) {\n//       const destStat = await lstat(dest);\n//       const bothSymlinks = srcStat.isSymbolicLink() && destStat.isSymbolicLink();\n//       const bothFolders = srcStat.isDirectory() && destStat.isDirectory();\n//       const bothFiles = srcStat.isFile() && destStat.isFile();\n//       if (srcStat.mode !== destStat.mode) {\n//         try {\n//           await access(dest, srcStat.mode);\n//         } catch (err) {\n//           // EINVAL access errors sometimes happen which shouldn't because node shouldn't be giving\n//           // us modes that aren't valid. investigate this, it's generally safe to proceed.\n//           reporter.verbose(err);\n//         }\n//       }\n//       if (bothFiles && artifactFiles.has(dest)) {\n//         // this file gets changed during build, likely by a custom install script. Don't bother checking it.\n//         onDone();\n//         reporter.verbose(reporter.lang('verboseFileSkipArtifact', src));\n//         return;\n//       }\n//       // correct hardlink\n//       if (bothFiles && srcStat.ino !== null && srcStat.ino === destStat.ino) {\n//         onDone();\n//         reporter.verbose(reporter.lang('verboseFileSkip', src, dest, srcStat.ino));\n//         return;\n//       }\n//       if (bothSymlinks) {\n//         const srcReallink = await readlink(src);\n//         if (srcReallink === (await readlink(dest))) {\n//           // if both symlinks are the same then we can continue on\n//           onDone();\n//           reporter.verbose(reporter.lang('verboseFileSkipSymlink', src, dest, srcReallink));\n//           return;\n//         }\n//       }\n//       if (bothFolders) {\n//         // mark files that aren't in this folder as possibly extraneous\n//         const destFiles = await readdir(dest);\n//         invariant(srcFiles, 'src files not initialised');\n//         for (const file of destFiles) {\n//           if (srcFiles.indexOf(file) < 0) {\n//             const loc = path.join(dest, file);\n//             possibleExtraneous.add(loc);\n//             if ((await lstat(loc)).isDirectory()) {\n//               for (const file of await readdir(loc)) {\n//                 possibleExtraneous.add(path.join(loc, file));\n//               }\n//             }\n//           }\n//         }\n//       }\n//     }\n//     if (srcStat.isSymbolicLink()) {\n//       onFresh();\n//       const linkname = await readlink(src);\n//       actions.symlink.push({\n//         dest,\n//         linkname,\n//       });\n//       onDone();\n//     } else if (srcStat.isDirectory()) {\n//       reporter.verbose(reporter.lang('verboseFileFolder', dest));\n//       await mkdirp(dest);\n//       const destParts = dest.split(path.sep);\n//       while (destParts.length) {\n//         files.add(destParts.join(path.sep).toLowerCase());\n//         destParts.pop();\n//       }\n//       // push all files to queue\n//       invariant(srcFiles, 'src files not initialised');\n//       let remaining = srcFiles.length;\n//       if (!remaining) {\n//         onDone();\n//       }\n//       for (const file of srcFiles) {\n//         queue.push({\n//           onFresh,\n//           src: path.join(src, file),\n//           dest: path.join(dest, file),\n//           onDone: () => {\n//             if (--remaining === 0) {\n//               onDone();\n//             }\n//           },\n//         });\n//       }\n//     } else if (srcStat.isFile()) {\n//       onFresh();\n//       actions.link.push({\n//         src,\n//         dest,\n//         removeDest: destExists,\n//       });\n//       onDone();\n//     } else {\n//       throw new Error(`unsure how to copy this: ${src}`);\n//     }\n//   }\n// }\n// export function copy(src: string, dest: string, reporter: Reporter): Promise<void> {\n//   return copyBulk([{src, dest}], reporter);\n// }\n// export async function copyBulk(\n//   queue: CopyQueue,\n//   reporter: Reporter,\n//   _events?: {\n//     onProgress?: (dest: string) => void,\n//     onStart?: (num: number) => void,\n//     possibleExtraneous: Set<string>,\n//     ignoreBasenames?: Array<string>,\n//     artifactFiles?: Array<string>,\n//   },\n// ): Promise<void> {\n//   const events: CopyOptions = {\n//     onStart: (_events && _events.onStart) || noop,\n//     onProgress: (_events && _events.onProgress) || noop,\n//     possibleExtraneous: _events ? _events.possibleExtraneous : new Set(),\n//     ignoreBasenames: (_events && _events.ignoreBasenames) || [],\n//     artifactFiles: (_events && _events.artifactFiles) || [],\n//   };\n//   const actions: CopyActions = await buildActionsForCopy(queue, events, events.possibleExtraneous, reporter);\n//   events.onStart(actions.file.length + actions.symlink.length + actions.link.length);\n//   const fileActions: Array<CopyFileAction> = actions.file;\n//   const currentlyWriting: Map<string, Promise<void>> = new Map();\n//   await promise.queue(\n//     fileActions,\n//     async (data: CopyFileAction): Promise<void> => {\n//       let writePromise;\n//       while ((writePromise = currentlyWriting.get(data.dest))) {\n//         await writePromise;\n//       }\n//       reporter.verbose(reporter.lang('verboseFileCopy', data.src, data.dest));\n//       const copier = copyFile(data, () => currentlyWriting.delete(data.dest));\n//       currentlyWriting.set(data.dest, copier);\n//       events.onProgress(data.dest);\n//       return copier;\n//     },\n//     CONCURRENT_QUEUE_ITEMS,\n//   );\n//   // we need to copy symlinks last as they could reference files we were copying\n//   const symlinkActions: Array<CopySymlinkAction> = actions.symlink;\n//   await promise.queue(symlinkActions, (data): Promise<void> => {\n//     const linkname = path.resolve(path.dirname(data.dest), data.linkname);\n//     reporter.verbose(reporter.lang('verboseFileSymlink', data.dest, linkname));\n//     return symlink(linkname, data.dest);\n//   });\n// }\n// export async function hardlinkBulk(\n//   queue: CopyQueue,\n//   reporter: Reporter,\n//   _events?: {\n//     onProgress?: (dest: string) => void,\n//     onStart?: (num: number) => void,\n//     possibleExtraneous: Set<string>,\n//     artifactFiles?: Array<string>,\n//   },\n// ): Promise<void> {\n//   const events: CopyOptions = {\n//     onStart: (_events && _events.onStart) || noop,\n//     onProgress: (_events && _events.onProgress) || noop,\n//     possibleExtraneous: _events ? _events.possibleExtraneous : new Set(),\n//     artifactFiles: (_events && _events.artifactFiles) || [],\n//     ignoreBasenames: [],\n//   };\n//   const actions: CopyActions = await buildActionsForHardlink(queue, events, events.possibleExtraneous, reporter);\n//   events.onStart(actions.file.length + actions.symlink.length + actions.link.length);\n//   const fileActions: Array<LinkFileAction> = actions.link;\n//   await promise.queue(\n//     fileActions,\n//     async (data): Promise<void> => {\n//       reporter.verbose(reporter.lang('verboseFileLink', data.src, data.dest));\n//       if (data.removeDest) {\n//         await unlink(data.dest);\n//       }\n//       await link(data.src, data.dest);\n//     },\n//     CONCURRENT_QUEUE_ITEMS,\n//   );\n//   // we need to copy symlinks last as they could reference files we were copying\n//   const symlinkActions: Array<CopySymlinkAction> = actions.symlink;\n//   await promise.queue(symlinkActions, (data): Promise<void> => {\n//     const linkname = path.resolve(path.dirname(data.dest), data.linkname);\n//     reporter.verbose(reporter.lang('verboseFileSymlink', data.dest, linkname));\n//     return symlink(linkname, data.dest);\n//   });\n// }\n// function _readFile(loc: string, encoding: string): Promise<any> {\n//   return new Promise((resolve, reject) => {\n//     fs.readFile(loc, encoding, function(err, content) {\n//       if (err) {\n//         reject(err);\n//       } else {\n//         resolve(content);\n//       }\n//     });\n//   });\n// }\n// export function readFile(loc: string): Promise<string> {\n//   return _readFile(loc, 'utf8').then(normalizeOS);\n// }\n// export function readFileRaw(loc: string): Promise<Buffer> {\n//   return _readFile(loc, 'binary');\n// }\n// export async function readFileAny(files: Array<string>): Promise<string | null> {\n//   for (const file of files) {\n//     if (await exists(file)) {\n//       return readFile(file);\n//     }\n//   }\n//   return null;\n// }\nexport async function readJson(loc) {\n    return (await readJsonAndFile(loc)).object;\n}\nexport async function readJsonAndFile(loc) {\n    const file = await readFile(loc);\n    try {\n        return {\n            object: map(JSON.parse(stripBOM(file))),\n            content: file,\n        };\n    }\n    catch (err) {\n        err.message = `${loc}: ${err.message}`;\n        throw err;\n    }\n}\nexport async function walk(dir, relativeDir, ignoreBasenames = new Set()) {\n    let files = [];\n    let filenames = await readdir(dir);\n    if (ignoreBasenames.size) {\n        filenames = filenames.filter(name => !ignoreBasenames.has(name));\n    }\n    for (const name of filenames) {\n        const relative = relativeDir ? path.join(relativeDir, name) : name;\n        const loc = path.join(dir, name);\n        const stat = await lstat(loc);\n        files.push({\n            relative,\n            basename: name,\n            absolute: loc,\n            mtime: +stat.mtime,\n        });\n        if (stat.isDirectory()) {\n            files = files.concat(await walk(loc, relative, ignoreBasenames));\n        }\n    }\n    return files;\n}\n// export async function getFileSizeOnDisk(loc: string): Promise<number> {\n//   const stat = await lstat(loc);\n//   const {size, blksize: blockSize} = stat;\n//   return Math.ceil(size / blockSize) * blockSize;\n// }\n// export function normalizeOS(body: string): string {\n//   return body.replace(/\\r\\n/g, '\\n');\n// }\nconst cr = '\\r'.charCodeAt(0);\nconst lf = '\\n'.charCodeAt(0);\nasync function getEolFromFile(path) {\n    if (!(await exists(path))) {\n        return undefined;\n    }\n    const buffer = await readFileBuffer(path);\n    for (let i = 0; i < buffer.length; ++i) {\n        if (buffer[i] === cr) {\n            return '\\r\\n';\n        }\n        if (buffer[i] === lf) {\n            return '\\n';\n        }\n    }\n    return undefined;\n}\nexport async function writeFilePreservingEol(path, data) {\n    const eol = (await getEolFromFile(path)) || os.EOL;\n    if (eol !== '\\n') {\n        data = data.replace(/\\n/g, eol);\n    }\n    await writeFile(path, data);\n}\n// export async function hardlinksWork(dir: string): Promise<boolean> {\n//   const filename = 'test-file' + Math.random();\n//   const file = path.join(dir, filename);\n//   const fileLink = path.join(dir, filename + '-link');\n//   try {\n//     await writeFile(file, 'test');\n//     await link(file, fileLink);\n//   } catch (err) {\n//     return false;\n//   } finally {\n//     await unlink(file);\n//     await unlink(fileLink);\n//   }\n//   return true;\n// }\n// // not a strict polyfill for Node's fs.mkdtemp\n// export async function makeTempDir(prefix?: string): Promise<string> {\n//   const dir = path.join(os.tmpdir(), `pika-${prefix || ''}-${Date.now()}-${Math.random()}`);\n//   await unlink(dir);\n//   await mkdirp(dir);\n//   return dir;\n// }\n// export async function readFirstAvailableStream(paths: Iterable<string>): Promise<?ReadStream> {\n//   for (const path of paths) {\n//     try {\n//       const fd = await open(path, 'r');\n//       return fs.createReadStream(path, {fd});\n//     } catch (err) {\n//       // Try the next one\n//     }\n//   }\n//   return null;\n// }\n// export async function getFirstSuitableFolder(\n//   paths: Iterable<string>,\n//   mode: number = constants.W_OK | constants.X_OK, // eslint-disable-line no-bitwise\n// ): Promise<FolderQueryResult> {\n//   const result: FolderQueryResult = {\n//     skipped: [],\n//     folder: null,\n//   };\n//   for (const folder of paths) {\n//     try {\n//       await mkdirp(folder);\n//       await access(folder, mode);\n//       result.folder = folder;\n//       return result;\n//     } catch (error) {\n//       result.skipped.push({\n//         error,\n//         folder,\n//       });\n//     }\n//   }\n//   return result;\n// }\n","export async function generatePublishManifest(manifest, config, _dists) {\n    const { name, version, description, keywords, homepage, bugs, bin, license, authors, contributors, man, sideEffects, repository, dependencies, peerDependencies, devDependencies, bundledDependencies, optionalDependencies, engines, enginesStrict, private: priv, publishConfig, } = manifest;\n    const newManifest = {\n        name,\n        description,\n        version,\n        license,\n        bin,\n        files: ['dist-*/', 'bin/'],\n        pika: true,\n        sideEffects: sideEffects || false,\n        keywords,\n        homepage,\n        bugs,\n        authors,\n        contributors,\n        man,\n        repository,\n        dependencies: dependencies || {},\n        peerDependencies,\n        devDependencies,\n        bundledDependencies,\n        optionalDependencies,\n        engines,\n        enginesStrict,\n        private: priv,\n        publishConfig,\n    };\n    const dists = _dists || (await config.getDistributions());\n    for (const [runner, options] of dists) {\n        if (runner.manifest) {\n            await runner.manifest(newManifest, {\n                cwd: config.cwd,\n                isFull: true,\n                manifest,\n                options,\n            });\n        }\n    }\n    newManifest.pika = true;\n    return newManifest;\n}\nexport function generatePrettyManifest(manifest) {\n    return JSON.stringify({\n        ...manifest,\n        dependencies: Object.keys(manifest.dependencies).length === 0 ? {} : '{ ... }',\n    }, null, 2);\n}\n","import chalk from 'chalk';\nimport * as path from 'path';\nimport { DEFAULT_INDENT } from '../constants.js';\nimport * as fs from '../util/fs.js';\nimport { generatePrettyManifest, generatePublishManifest } from '../util/normalize-manifest/for-publish.js';\nexport function hasWrapper() {\n    return true;\n}\nexport const examples = null;\nexport class Build {\n    constructor(flags, config, reporter) {\n        this.flags = flags;\n        this.config = config;\n        this.reporter = reporter;\n        this.totalNum = 0;\n        this.out = path.resolve(config.cwd, flags.out || 'pkg/');\n        if (this.out === this.config.cwd) {\n            throw new Error('On publish, you cannot write to cwd because a package.json is created');\n        }\n    }\n    async cleanup() {\n        const { out } = this;\n        await fs.unlink(path.join(out, '*'));\n    }\n    async init(isFull) {\n        const { config, out, reporter, flags } = this;\n        const { cwd } = config;\n        const outPretty = path.relative(cwd, out) + path.sep;\n        const manifest = await config.manifest;\n        const { sourcemap } = manifest['@pika/pack'] || { sourcemap: true };\n        const distRunners = await config.getDistributions();\n        const builderConfig = {\n            out,\n            cwd,\n            reporter: {\n                info: msg => reporter.log(chalk.dim(`      » ${msg}`)),\n                warning: msg => reporter.log(chalk.yellow(`      » ${msg}`)),\n                success: msg => reporter.log(chalk.green(`      » ${msg}`)),\n                created: (filename, entrypoint) => reporter.log(`      📝  ${chalk.green(path.relative(cwd, filename))} ${entrypoint ? chalk.dim(`[${entrypoint}]`) : ''}`),\n            },\n            isFull,\n            manifest,\n            src: {\n                loc: path.join(out, 'dist-src'),\n                entrypoint: path.join(out, 'dist-src', 'index.js'),\n                // TODO: Deprecated, remove\n                options: {},\n                // TODO: Deprecated, remove\n                files: await (async () => {\n                    const ignoreSet = new Set([]);\n                    ignoreSet.add('**/*/README.md');\n                    const files = await fs.glob(`src/**/*`, {\n                        cwd,\n                        nodir: true,\n                        absolute: true,\n                        ignore: Array.from(ignoreSet).map(g => path.join('src', g)),\n                    });\n                    return files.filter(fileAbs => !fileAbs.endsWith('.d.ts'));\n                })(),\n            },\n        };\n        const steps = [];\n        steps.push(async (curr, total) => {\n            this.reporter.step(curr, total, 'Validating source');\n            for (const [runner, options] of distRunners) {\n                if (runner.validate) {\n                    const result = await runner.validate({\n                        ...builderConfig,\n                        options: { sourcemap, ...options },\n                    });\n                    if (result instanceof Error) {\n                        throw result;\n                    }\n                }\n            }\n        });\n        steps.push(async (curr, total) => {\n            this.reporter.step(curr, total, `Preparing pipeline`);\n            await this.cleanup();\n            reporter.log(`      ❇️  ${chalk.green(outPretty)}`);\n            for (const [runner, options] of distRunners) {\n                await (runner.beforeBuild &&\n                    runner.beforeBuild({\n                        ...builderConfig,\n                        options: { sourcemap, ...options },\n                    }));\n            }\n        });\n        if (distRunners.length === 0) {\n            steps.push(async (curr, total) => {\n                this.reporter.step(curr, total, `Pipeline is empty! See ${chalk.underline('https://github.com/pikapkg/pack')} for help getting started`);\n            });\n        }\n        for (const [runner, options] of distRunners) {\n            steps.push(async (curr, total) => {\n                this.reporter.step(curr, total, `Running ${chalk.bold(runner.name)}`);\n                // return Promise.resolve(\n                try {\n                    await (runner.beforeJob &&\n                        runner.beforeJob({\n                            ...builderConfig,\n                            options: { sourcemap, ...options },\n                        }));\n                    await (runner.build &&\n                        runner.build({\n                            ...builderConfig,\n                            options: { sourcemap, ...options },\n                        }));\n                    await (runner.afterJob &&\n                        runner.afterJob({\n                            ...builderConfig,\n                            options: { sourcemap, ...options },\n                        }));\n                }\n                catch (err) {\n                    if (flags.force) {\n                        console.log('      ❗️  ', chalk.red(err.message), chalk.dim('--force, continuing...'));\n                    }\n                    else {\n                        throw err;\n                    }\n                }\n                // ).catch(err => {\n                // log(chalk.red(err.message));\n                // reporter.log(\n                //   reporter.lang(\"distFailed\", runner.name, err.code, err.message),\n                //   { force: true }\n                // );\n                // if (err.forceExit === true) {\n                // reporter.log(reporter.lang(\"distExiting\"));\n                // throw err;\n                // return;\n                // }\n                // reporter.log(reporter.lang(\"distContinuing\"));\n                // });\n            });\n        }\n        steps.push(async (curr, total) => {\n            this.reporter.step(curr, total, `Finalizing package`);\n            for (const [runner, options] of distRunners) {\n                await (runner.afterBuild &&\n                    runner.afterBuild({\n                        ...builderConfig,\n                        options: { sourcemap, ...options },\n                    }));\n            }\n            if (await fs.exists(path.join(cwd, 'CHANGELOG'))) {\n                fs.copyFile(path.join(cwd, 'CHANGELOG'), path.join(out, 'CHANGELOG'));\n                reporter.log(chalk.dim(`      » copying CHANGELOG...`));\n            }\n            else if (await fs.exists(path.join(cwd, 'CHANGELOG.md'))) {\n                fs.copyFile(path.join(cwd, 'CHANGELOG.md'), path.join(out, 'CHANGELOG.md'));\n                reporter.log(chalk.dim(`      » copying CHANGELOG.md...`));\n            }\n            if (await fs.exists(path.join(cwd, 'LICENSE'))) {\n                fs.copyFile(path.join(cwd, 'LICENSE'), path.join(out, 'LICENSE'));\n                reporter.log(chalk.dim(`      » copying LICENSE...`));\n            }\n            else if (await fs.exists(path.join(cwd, 'LICENSE.md'))) {\n                fs.copyFile(path.join(cwd, 'LICENSE.md'), path.join(out, 'LICENSE.md'));\n                reporter.log(chalk.dim(`      » copying LICENSE.md...`));\n            }\n            if (await fs.exists(path.join(cwd, 'README'))) {\n                fs.copyFile(path.join(cwd, 'README'), path.join(out, 'README'));\n                reporter.log(chalk.dim(`      » copying README...`));\n            }\n            else if (await fs.exists(path.join(cwd, 'README.md'))) {\n                fs.copyFile(path.join(cwd, 'README.md'), path.join(out, 'README.md'));\n                reporter.log(chalk.dim(`      » copying README.md...`));\n            }\n            const publishManifest = await generatePublishManifest(config._manifest, config, distRunners);\n            if (out === cwd) {\n                reporter.log(`NEW MANIFEST:\\n\\n`);\n                reporter.log(generatePrettyManifest(publishManifest));\n                reporter.log(`\\n\\n`);\n            }\n            else {\n                await fs.writeFilePreservingEol(path.join(out, 'package.json'), JSON.stringify(publishManifest, null, DEFAULT_INDENT) + '\\n');\n                reporter.log(`      📝  ` + chalk.green(outPretty + 'package.json'));\n            }\n            reporter.log(`      📦  ` + chalk.green(outPretty));\n        });\n        let currentStep = 0;\n        for (const step of steps) {\n            await step(++currentStep, steps.length);\n        }\n    }\n}\nexport async function run(config, reporter, flags, args) {\n    const isProduction = flags.publish;\n    const builder = new Build(flags, config, reporter);\n    await builder.init(isProduction);\n}\n","export default {\n    autohr: 'author',\n    autor: 'author',\n    contributers: 'contributors',\n    depdenencies: 'dependencies',\n    dependancies: 'dependencies',\n    dependecies: 'dependencies',\n    depends: 'dependencies',\n    'dev-dependencies': 'devDependencies',\n    devDependences: 'devDependencies',\n    devDepenencies: 'devDependencies',\n    devEependencies: 'devDependencies',\n    devdependencies: 'devDependencies',\n    hampage: 'homepage',\n    hompage: 'homepage',\n    prefereGlobal: 'preferGlobal',\n    publicationConfig: 'publishConfig',\n    repo: 'repository',\n    repostitory: 'repository',\n    script: 'scripts',\n};\n","import { MessageError } from '@pika/types';\nimport typos from './typos.js';\nimport isBuiltinModule from 'is-builtin-module';\nconst strings = ['name', 'version'];\nconst dependencyKeys = [\n    // npm registry will include optionalDependencies in dependencies and we'll want to dedupe them from the\n    // other fields first\n    'optionalDependencies',\n    // it's seemingly common to include a dependency in dependencies and devDependencies of the same name but\n    // different ranges, this can cause a lot of issues with our determinism and the behaviour of npm is\n    // currently unspecified.\n    'dependencies',\n    'devDependencies',\n];\nfunction isValidName(name) {\n    return !name.match(/[\\/@\\s\\+%:]/) && encodeURIComponent(name) === name;\n}\nfunction isValidScopedName(name) {\n    if (name[0] !== '@') {\n        return false;\n    }\n    const parts = name.slice(1).split('/');\n    return parts.length === 2 && isValidName(parts[0]) && isValidName(parts[1]);\n}\nexport function isValidPackageName(name) {\n    return isValidName(name) || isValidScopedName(name);\n}\nexport default function (info, isRoot, reporter, warn) {\n    if (isRoot) {\n        for (const key in typos) {\n            if (key in info) {\n                warn(reporter.lang('manifestPotentialTypo', key, typos[key]));\n            }\n        }\n    }\n    // validate name\n    const { name } = info;\n    if (typeof name === 'string') {\n        if (isRoot && isBuiltinModule(name)) {\n            warn(reporter.lang('manifestBuiltinModule', name));\n        }\n        // cannot start with a dot\n        if (name[0] === '.') {\n            throw new MessageError(reporter.lang('manifestNameDot'));\n        }\n        // cannot contain the following characters\n        if (!isValidPackageName(name)) {\n            throw new MessageError(reporter.lang('manifestNameIllegalChars'));\n        }\n        // cannot equal node_modules or favicon.ico\n        const lower = name.toLowerCase();\n        if (lower === 'node_modules' || lower === 'favicon.ico') {\n            throw new MessageError(reporter.lang('manifestNameBlacklisted'));\n        }\n    }\n    // Only care if you are trying to publish to npm.\n    // // validate license\n    // if (isRoot && !info.private) {\n    //   if (typeof info.license === 'string') {\n    //     const license = info.license.replace(/\\*$/g, '');\n    //     if (!isValidLicense(license)) {\n    //       warn(reporter.lang('manifestLicenseInvalid'));\n    //     }\n    //   } else {\n    //     warn(reporter.lang('manifestLicenseNone'));\n    //   }\n    // }\n    // validate strings\n    for (const key of strings) {\n        const val = info[key];\n        if (val && typeof val !== 'string') {\n            throw new MessageError(reporter.lang('manifestStringExpected', key));\n        }\n    }\n    cleanDependencies(info, isRoot, reporter, warn);\n}\nexport function cleanDependencies(info, isRoot, reporter, warn) {\n    // get dependency objects\n    const depTypes = [];\n    for (const type of dependencyKeys) {\n        const deps = info[type];\n        if (!deps || typeof deps !== 'object') {\n            continue;\n        }\n        depTypes.push([type, deps]);\n    }\n    // aggregate all non-trivial deps (not '' or '*')\n    const nonTrivialDeps = new Map();\n    for (const [type, deps] of depTypes) {\n        for (const name of Object.keys(deps)) {\n            const version = deps[name];\n            if (!nonTrivialDeps.has(name) && version && version !== '*') {\n                nonTrivialDeps.set(name, { type, version });\n            }\n        }\n    }\n    // overwrite first dep of package with non-trivial version, remove the rest\n    const setDeps = new Set();\n    for (const [type, deps] of depTypes) {\n        for (const name of Object.keys(deps)) {\n            let version = deps[name];\n            const dep = nonTrivialDeps.get(name);\n            if (dep) {\n                if (version && version !== '*' && version !== dep.version && isRoot) {\n                    // only throw a warning when at the root\n                    warn(reporter.lang('manifestDependencyCollision', dep.type, name, dep.version, type, version));\n                }\n                version = dep.version;\n            }\n            if (setDeps.has(name)) {\n                delete deps[name];\n            }\n            else {\n                deps[name] = version;\n                setDeps.add(name);\n            }\n        }\n    }\n}\n","import validateLicense from 'validate-npm-package-license';\nexport function isValidLicense(license) {\n    return !!license && validateLicense(license).validForNewPackages;\n}\nexport function stringifyPerson(person) {\n    if (!person || typeof person !== 'object') {\n        return person;\n    }\n    const parts = [];\n    if (person.name) {\n        parts.push(person.name);\n    }\n    const email = person.email || person.mail;\n    if (typeof email === 'string') {\n        parts.push(`<${email}>`);\n    }\n    const url = person.url || person.web;\n    if (typeof url === 'string') {\n        parts.push(`(${url})`);\n    }\n    return parts.join(' ');\n}\nexport function parsePerson(person) {\n    if (typeof person !== 'string') {\n        return person;\n    }\n    // format: name (url) <email>\n    const obj = {};\n    let name = person.match(/^([^\\(<]+)/);\n    if (name && name[0].trim()) {\n        obj.name = name[0].trim();\n    }\n    const email = person.match(/<([^>]+)>/);\n    if (email) {\n        obj.email = email[1];\n    }\n    const url = person.match(/\\(([^\\)]+)\\)/);\n    if (url) {\n        obj.url = url[1];\n    }\n    return obj;\n}\nexport function normalizePerson(person) {\n    return parsePerson(stringifyPerson(person));\n}\nexport function extractDescription(readme) {\n    if (typeof readme !== 'string' || readme === '') {\n        return undefined;\n    }\n    // split into lines\n    const lines = readme.trim().split('\\n').map((line) => line.trim());\n    // find the start of the first paragraph, ignore headings\n    let start = 0;\n    for (; start < lines.length; start++) {\n        const line = lines[start];\n        if (line && line.match(/^(#|$)/)) {\n            // line isn't empty and isn't a heading so this is the start of a paragraph\n            start++;\n            break;\n        }\n    }\n    // skip newlines from the header to the first line\n    while (start < lines.length && !lines[start]) {\n        start++;\n    }\n    // continue to the first non empty line\n    let end = start;\n    while (end < lines.length && lines[end]) {\n        end++;\n    }\n    return lines.slice(start, end).join(' ');\n}\n","export default ({\n    'Apache-2.0': new RegExp('(licensed under the apache license version the license you may not use this file except in compliance with the license you may obtain a copy of the license at http www apache org licenses license unless required by applicable law or agreed to in writing software distributed under the license is distributed on an as is basis without warranties or conditions of any kind either express or implied see the license for the specific language governing permissions and limitations under the license$|apache license version january http www apache org licenses terms and conditions for use reproduction and distribution definitions license shall mean the terms and conditions for use reproduction and distribution as defined by sections through of this document licensor shall mean the copyright owner or entity authorized by the copyright owner that is granting the license legal entity shall mean the union of the acting entity and all other entities that control are controlled by or are under common control with that entity for the purposes of this definition control means i the power direct or indirect to cause the direction or management of such entity whether by contract or otherwise or ii ownership of fifty percent or more of the outstanding shares or iii beneficial ownership of such entity you or your shall mean an individual or legal entity exercising permissions granted by this license source form shall mean the preferred form for making modifications including but not limited to software source code documentation source and configuration files object form shall mean any form resulting from mechanical transformation or translation of a source form including but not limited to compiled object code generated documentation and conversions to other media types work shall mean the work of authorship whether in source or object form made available under the license as indicated by a copyright notice that is included in or attached to the work an example is provided in the appendix below derivative works shall mean any work whether in source or object form that is based on or derived from the work and for which the editorial revisions annotations elaborations or other modifications represent as a whole an original work of authorship for the purposes of this license derivative works shall not include works that remain separable from or merely link or bind by name to the interfaces of the work and derivative works thereof contribution shall mean any work of authorship including the original version of the work and any modifications or additions to that work or derivative works thereof that is intentionally submitted to licensor for inclusion in the work by the copyright owner or by an individual or legal entity authorized to submit on behalf of the copyright owner for the purposes of this definition submitted means any form of electronic verbal or written communication sent to the licensor or its representatives including but not limited to communication on electronic mailing lists source code control systems and issue tracking systems that are managed by or on behalf of the licensor for the purpose of discussing and improving the work but excluding communication that is conspicuously marked or otherwise designated in writing by the copyright owner as not a contribution contributor shall mean licensor and any individual or legal entity on behalf of whom a contribution has been received by licensor and subsequently incorporated within the work grant of copyright license subject to the terms and conditions of this license each contributor hereby grants to you a perpetual worldwide non exclusive no charge royalty free irrevocable copyright license to reproduce prepare derivative works of publicly display publicly perform sublicense and distribute the work and such derivative works in source or object form grant of patent license subject to the terms and conditions of this license each contributor hereby grants to you a perpetual worldwide non exclusive no charge royalty free irrevocable except as stated in this section patent license to make have made use offer to sell sell import and otherwise transfer the work where such license applies only to those patent claims licensable by such contributor that are necessarily infringed by their contribution s alone or by combination of their contribution s with the work to which such contribution s was submitted if you institute patent litigation against any entity including a cross claim or counterclaim in a lawsuit alleging that the work or a contribution incorporated within the work constitutes direct or contributory patent infringement then any patent licenses granted to you under this license for that work shall terminate as of the date such litigation is filed redistribution you may reproduce and distribute copies of the work or derivative works thereof in any medium with or without modifications and in source or object form provided that you meet the following conditions a you must give any other recipients of the work or derivative works a copy of this license and b you must cause any modified files to carry prominent notices stating that you changed the files and c you must retain in the source form of any derivative works that you distribute all copyright patent trademark and attribution notices from the source form of the work excluding those notices that do not pertain to any part of the derivative works and d if the work includes a notice text file as part of its distribution then any derivative works that you distribute must include a readable copy of the attribution notices contained within such notice file excluding those notices that do not pertain to any part of the derivative works in at least one of the following places within a notice text file distributed as part of the derivative works within the source form or documentation if provided along with the derivative works or within a display generated by the derivative works if and wherever such third party notices normally appear the contents of the notice file are for informational purposes only and do not modify the license you may add your own attribution notices within derivative works that you distribute alongside or as an addendum to the notice text from the work provided that such additional attribution notices cannot be construed as modifying the license you may add your own copyright statement to your modifications and may provide additional or different license terms and conditions for use reproduction or distribution of your modifications or for any such derivative works as a whole provided your use reproduction and distribution of the work otherwise complies with the conditions stated in this license submission of contributions unless you explicitly state otherwise any contribution intentionally submitted for inclusion in the work by you to the licensor shall be under the terms and conditions of this license without any additional terms or conditions notwithstanding the above nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with licensor regarding such contributions trademarks this license does not grant permission to use the trade names trademarks service marks or product names of the licensor except as required for reasonable and customary use in describing the origin of the work and reproducing the content of the notice file disclaimer of warranty unless required by applicable law or agreed to in writing licensor provides the work and each contributor provides its contributions on an as is basis without warranties or conditions of any kind either express or implied including without limitation any warranties or conditions of title non infringement merchantability or fitness for a particular purpose you are solely responsible for determining the appropriateness of using or redistributing the work and assume any risks associated with your exercise of permissions under this license limitation of liability in no event and under no legal theory whether in tort including negligence contract or otherwise unless required by applicable law such as deliberate and grossly negligent acts or agreed to in writing shall any contributor be liable to you for damages including any direct indirect special incidental or consequential damages of any character arising as a result of this license or out of the use or inability to use the work including but not limited to damages for loss of goodwill work stoppage computer failure or malfunction or any and all other commercial damages or losses even if such contributor has been advised of the possibility of such damages accepting warranty or additional liability while redistributing the work or derivative works thereof you may choose to offer and charge a fee for acceptance of support warranty indemnity or other liability obligations and or rights consistent with this license however in accepting such obligations you may act only on your own behalf and on your sole responsibility not on behalf of any other contributor and only if you agree to indemnify defend and hold each contributor harmless for any liability incurred by or claims asserted against such contributor by reason of your accepting any such warranty or additional liability end of terms and conditions$)', 'g'),\n    'BSD-2-Clause': new RegExp('(redistribution and use in source and binary forms with or without modification are permitted provided that the following conditions are met redistributions of source code must retain the above copyright notice this list of conditions and the following disclaimer redistributions in binary form must reproduce the above copyright notice this list of conditions and the following disclaimer in the documentation and or other materials provided with the distribution this(.*?| )is provided by the copyright holders and contributors as is and any express or implied warranties including but not limited to the implied warranties of merchantability and fitness for a particular purpose are disclaimed in no event shall(.*?| )be liable for any direct indirect incidental special exemplary or consequential damages including but not limited to procurement of substitute goods or services loss of use data or profits or business interruption however caused and on any theory of liability whether in contract strict liability or tort including negligence or otherwise arising in any way out of the use of this(.*?| )even if advised of the possibility of such damage$|redistribution and use in source and binary forms with or without modification are permitted provided that the following conditions are met redistributions of source code must retain the above copyright notice this list of conditions and the following disclaimer redistributions in binary form must reproduce the above copyright notice this list of conditions and the following disclaimer in the documentation and or other materials provided with the distribution this software is provided by the copyright holders and contributors as is and any express or implied warranties including but not limited to the implied warranties of merchantability and fitness for a particular purpose are disclaimed in no event shall(.*?| )be liable for any direct indirect incidental special exemplary or consequential damages including but not limited to procurement of substitute goods or services loss of use data or profits or business interruption however caused and on any theory of liability whether in contract strict liability or tort including negligence or otherwise arising in any way out of the use of this software even if advised of the possibility of such damage$)', 'g'),\n    'BSD-3-Clause': new RegExp('(redistribution and use in source and binary forms with or without modification are permitted provided that the following conditions are met redistributions of source code must retain the above copyright notice this list of conditions and the following disclaimer redistributions in binary form must reproduce the above copyright notice this list of conditions and the following disclaimer in the documentation and or other materials provided with the distribution neither the name of(.*?| )nor the names of the contributors may be used to endorse or promote products derived from this software without specific prior written permission this software is provided by the copyright holders and contributors as is and any express or implied warranties including but not limited to the implied warranties of merchantability and fitness for a particular purpose are disclaimed in no event shall(.*?| )be liable for any direct indirect incidental special exemplary or consequential damages including but not limited to procurement of substitute goods or services loss of use data or profits or business interruption however caused and on any theory of liability whether in contract strict liability or tort including negligence or otherwise arising in any way out of the use of this software even if advised of the possibility of such damage$|(redistribution and use in source and binary forms with or without modification are permitted provided that the following conditions are met redistributions of source code must retain the above copyright notice this list of conditions and the following disclaimer redistributions in binary form must reproduce the above copyright notice this list of conditions and the following disclaimer in the documentation and or other materials provided with the distribution the names of any contributors may not be used to endorse or promote products derived from this software without specific prior written permission this software is provided by the copyright holders and contributors as is and any express or implied warranties including but not limited to the implied warranties of merchantability and fitness for a particular purpose are disclaimed in no event shall the copyright holders and contributors be liable for any direct indirect incidental special exemplary or consequential damages including but not limited to procurement of substitute goods or services loss of use data or profits or business interruption however caused and on any theory of liability whether in contract strict liability or tort including negligence or otherwise arising in any way out of the use of this software even if advised of the possibility of such damage$|redistribution and use in source and binary forms with or without modification are permitted provided that the following conditions are met redistributions of source code must retain the above copyright notice this list of conditions and the following disclaimer redistributions in binary form must reproduce the above copyright notice this list of conditions and the following disclaimer in the documentation and or other materials provided with the distribution neither the name(.*?| )nor the names of(.*?| )contributors may be used to endorse or promote products derived from this software without specific prior written permission this software is provided by(.*?| )as is and any express or implied warranties including but not limited to the implied warranties of merchantability and fitness for a particular purpose are disclaimed in no event shall(.*?| )be liable for any direct indirect incidental special exemplary or consequential damages including but not limited to procurement of substitute goods or services loss of use data or profits or business interruption however caused and on any theory of liability whether in contract strict liability or tort including negligence or otherwise arising in any way out of the use of this software even if advised of the possibility of such damage$))', 'g'),\n    MIT: new RegExp('permission is hereby granted free of charge to any person obtaining a copy of this software and associated documentation files the software to deal in the software without restriction including without limitation the rights to use copy modify merge publish distribute sublicense and or sell copies of the software and to permit persons to whom the software is furnished to do so subject to the following conditions the above copyright notice and this permission notice shall be included in all copies or substantial portions of the software the software is provided as is without warranty of any kind express or implied including but not limited to the warranties of merchantability fitness for a particular purpose and noninfringement in no event shall the authors or copyright holders be liable for any claim damages or other liability whether in an action of contract tort or otherwise arising from out of or in connection with the software or the use or other dealings in the software$', 'g'),\n    Unlicense: new RegExp('this is free and unencumbered software released into the public domain anyone is free to copy modify publish use compile sell or distribute this software either in source code form or as a compiled binary for any purpose commercial or non commercial and by any means in jurisdictions that recognize copyright laws the author or authors of this software dedicate any and all copyright interest in the software to the public domain we make this dedication for the benefit of the public at large and to the detriment of our heirs and successors we intend this dedication to be an overt act of relinquishment in perpetuity of all present and future rights to this software under copyright law the software is provided as is without warranty of any kind express or implied including but not limited to the warranties of merchantability fitness for a particular purpose and noninfringement in no event shall the authors be liable for any claim damages or other liability whether in an action of contract tort or otherwise arising from out of or in connection with the software or the use or other dealings in the software for more information please refer to wildcard$', 'g'),\n});\n","import LICENSES from './licenses.js';\nfunction clean(str) {\n    return str.replace(/[^A-Za-z\\s]/g, ' ').replace(/[\\s]+/g, ' ').trim().toLowerCase();\n}\nconst REGEXES = {\n    Apache: [/Apache License\\b/],\n    BSD: [/BSD\\b/],\n    ISC: [/The ISC License/, /ISC\\b/],\n    MIT: [/MIT\\b/],\n    Unlicense: [/http:\\/\\/unlicense.org\\//],\n    WTFPL: [/DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE/, /WTFPL\\b/],\n};\nexport default function inferLicense(license) {\n    // check if we have any explicit licenses\n    const cleanLicense = clean(license);\n    for (const licenseName in LICENSES) {\n        const testLicense = LICENSES[licenseName];\n        if (cleanLicense.search(testLicense) >= 0) {\n            return licenseName;\n        }\n    }\n    // infer based on some keywords\n    for (const licenseName in REGEXES) {\n        for (const regex of REGEXES[licenseName]) {\n            if (license.search(regex) >= 0) {\n                return `${licenseName}*`;\n            }\n        }\n    }\n    return null;\n}\n","import { MANIFEST_FIELDS } from '../../constants.js';\nimport { isValidLicense } from './util.js';\nimport { normalizePerson, extractDescription } from './util.js';\nimport inferLicense from './infer-license.js';\nimport * as fs from '../fs.js';\nimport semver from 'semver';\nimport * as path from 'path';\nimport * as nodeUrl from 'url';\nconst LICENSE_RENAMES = {\n    'MIT/X11': 'MIT',\n    X11: 'MIT',\n};\nexport default (async function (info, moduleLoc, reporter, warn) {\n    const files = await fs.readdir(moduleLoc);\n    // clean info.version\n    if (typeof info.version === 'string') {\n        info.version = semver.clean(info.version) || info.version;\n    }\n    // if name or version aren't set then set them to empty strings\n    info.name = info.name || '';\n    info.version = info.version || '';\n    // if the man field is a string then coerce it to an array\n    if (typeof info.man === 'string') {\n        info.man = [info.man];\n    }\n    // if the keywords field is a string then split it on any whitespace\n    if (typeof info.keywords === 'string') {\n        info.keywords = info.keywords.split(/\\s+/g);\n    }\n    // if there's no contributors field but an authors field then expand it\n    if (!info.contributors && files.indexOf('AUTHORS') >= 0) {\n        const authorsFilepath = path.join(moduleLoc, 'AUTHORS');\n        const authorsFilestats = await fs.stat(authorsFilepath);\n        if (authorsFilestats.isFile()) {\n            let authors = await fs.readFile(authorsFilepath);\n            info.contributors = authors\n                .split(/\\r?\\n/g) // split on lines\n                .map((line) => line.replace(/^\\s*#.*$/, '').trim()) // remove comments\n                .filter((line) => !!line); // remove empty lines;\n        }\n    }\n    // expand people fields to objects\n    if (typeof info.author === 'string' || typeof info.author === 'object') {\n        info.author = normalizePerson(info.author);\n    }\n    if (Array.isArray(info.contributors)) {\n        info.contributors = info.contributors.map(normalizePerson);\n    }\n    if (Array.isArray(info.maintainers)) {\n        info.maintainers = info.maintainers.map(normalizePerson);\n    }\n    // if there's no readme field then load the README file from the cwd\n    if (!info.readme) {\n        const readmeCandidates = files\n            .filter((filename) => {\n            const lower = filename.toLowerCase();\n            return lower === 'readme' || lower.indexOf('readme.') === 0;\n        })\n            .sort((filename1, filename2) => {\n            // favor files with extensions\n            return filename2.indexOf('.') - filename1.indexOf('.');\n        });\n        for (const readmeFilename of readmeCandidates) {\n            const readmeFilepath = path.join(moduleLoc, readmeFilename);\n            const readmeFileStats = await fs.stat(readmeFilepath);\n            if (readmeFileStats.isFile()) {\n                info.readmeFilename = readmeFilename;\n                info.readme = await fs.readFile(readmeFilepath);\n                break;\n            }\n        }\n    }\n    // if there's no description then take the first paragraph from the readme\n    if (!info.description && info.readme) {\n        const desc = extractDescription(info.readme);\n        if (desc) {\n            info.description = desc;\n        }\n    }\n    // support array of engine keys\n    if (Array.isArray(info.engines)) {\n        const engines = {};\n        for (const str of info.engines) {\n            if (typeof str === 'string') {\n                const [name, ...patternParts] = str.trim().split(/ +/g);\n                engines[name] = patternParts.join(' ');\n            }\n        }\n        info.engines = engines;\n    }\n    // allow bugs to be specified as a string, expand it to an object with a single url prop\n    if (typeof info.bugs === 'string') {\n        info.bugs = { url: info.bugs };\n    }\n    // normalize homepage url to http\n    if (typeof info.homepage === 'string') {\n        const parts = nodeUrl.parse(info.homepage);\n        parts.protocol = parts.protocol || 'http:';\n        if (parts.pathname && !parts.hostname) {\n            parts.hostname = parts.pathname;\n            parts.pathname = '';\n        }\n        info.homepage = nodeUrl.format(parts);\n    }\n    // if the `bin` field is as string then expand it to an object with a single property\n    // based on the original `bin` field and `name field`\n    // { name: \"foo\", bin: \"cli.js\" } -> { name: \"foo\", bin: { foo: \"cli.js\" } }\n    if (typeof info.name === 'string' && typeof info.bin === 'string' && info.bin.length > 0) {\n        // Remove scoped package name for consistency with NPM's bin field fixing behaviour\n        const name = info.name.replace(/^@[^\\/]+\\//, '');\n        info.bin = { [name]: info.bin };\n    }\n    // bundleDependencies is an alias for bundledDependencies\n    if (info.bundledDependencies) {\n        info.bundleDependencies = info.bundledDependencies;\n        delete info.bundledDependencies;\n    }\n    let scripts;\n    // dummy script object to shove file inferred scripts onto\n    if (info.scripts && typeof info.scripts === 'object') {\n        scripts = info.scripts;\n    }\n    else {\n        scripts = {};\n    }\n    // if there's a server.js file and no start script then set it to `node server.js`\n    if (!scripts.start && files.indexOf('server.js') >= 0) {\n        scripts.start = 'node server';\n    }\n    // if there's a binding.gyp file and no install script then set it to `node-gyp rebuild`\n    if (!scripts.install && files.indexOf('binding.gyp') >= 0) {\n        scripts.install = 'node-gyp rebuild';\n    }\n    // set scripts if we've polluted the empty object\n    if (Object.keys(scripts).length) {\n        info.scripts = scripts;\n    }\n    const dirs = info.directories;\n    if (dirs && typeof dirs === 'object') {\n        const binDir = dirs.bin;\n        if (!info.bin && binDir && typeof binDir === 'string') {\n            const bin = (info.bin = {});\n            const fullBinDir = path.join(moduleLoc, binDir);\n            if (await fs.exists(fullBinDir)) {\n                for (const scriptName of await fs.readdir(fullBinDir)) {\n                    if (scriptName[0] === '.') {\n                        continue;\n                    }\n                    bin[scriptName] = path.join('.', binDir, scriptName);\n                }\n            }\n            else {\n                warn(reporter.lang('manifestDirectoryNotFound', binDir, info.name));\n            }\n        }\n        const manDir = dirs.man;\n        if (!info.man && typeof manDir === 'string') {\n            const man = (info.man = []);\n            const fullManDir = path.join(moduleLoc, manDir);\n            if (await fs.exists(fullManDir)) {\n                for (const filename of await fs.readdir(fullManDir)) {\n                    if (/^(.*?)\\.[0-9]$/.test(filename)) {\n                        man.push(path.join('.', manDir, filename));\n                    }\n                }\n            }\n            else {\n                warn(reporter.lang('manifestDirectoryNotFound', manDir, info.name));\n            }\n        }\n    }\n    delete info.directories;\n    // normalize licenses field\n    const licenses = info.licenses;\n    if (Array.isArray(licenses) && !info.license) {\n        let licenseTypes = [];\n        for (let license of licenses) {\n            if (license && typeof license === 'object') {\n                license = license.type;\n            }\n            if (typeof license === 'string') {\n                licenseTypes.push(license);\n            }\n        }\n        licenseTypes = licenseTypes.filter(isValidLicense);\n        if (licenseTypes.length === 1) {\n            info.license = licenseTypes[0];\n        }\n        else if (licenseTypes.length) {\n            info.license = `(${licenseTypes.join(' OR ')})`;\n        }\n    }\n    const license = info.license;\n    // normalize license\n    if (license && typeof license === 'object') {\n        info.license = license.type;\n    }\n    // get license file\n    const licenseFile = files.find((filename) => {\n        const lower = filename.toLowerCase();\n        return (lower === 'license' || lower.startsWith('license.') || lower === 'unlicense' || lower.startsWith('unlicense.'));\n    });\n    if (licenseFile) {\n        const licenseFilepath = path.join(moduleLoc, licenseFile);\n        const licenseFileStats = await fs.stat(licenseFilepath);\n        if (licenseFileStats.isFile()) {\n            const licenseContent = await fs.readFile(licenseFilepath);\n            const inferredLicense = inferLicense(licenseContent);\n            info.licenseText = licenseContent;\n            const license = info.license;\n            if (typeof license === 'string') {\n                if (inferredLicense && isValidLicense(inferredLicense) && !isValidLicense(license)) {\n                    // some packages don't specify their license version but we can infer it based on their license file\n                    const basicLicense = license.toLowerCase().replace(/(-like|\\*)$/g, '');\n                    const expandedLicense = inferredLicense.toLowerCase();\n                    if (expandedLicense.startsWith(basicLicense)) {\n                        // TODO consider doing something to notify the user\n                        info.license = inferredLicense;\n                    }\n                }\n            }\n            else if (inferredLicense) {\n                // if there's no license then infer it based on the license file\n                info.license = inferredLicense;\n            }\n            else {\n                // valid expression to refer to a license in a file\n                info.license = `SEE LICENSE IN ${licenseFile}`;\n            }\n        }\n    }\n    if (typeof info.license === 'string') {\n        // sometimes licenses are known by different names, reduce them\n        info.license = LICENSE_RENAMES[info.license] || info.license;\n    }\n    else if (typeof info.readme === 'string') {\n        // the license might be at the bottom of the README\n        const inferredLicense = inferLicense(info.readme);\n        if (inferredLicense) {\n            info.license = inferredLicense;\n        }\n    }\n    // get notice file\n    const noticeFile = files.find((filename) => {\n        const lower = filename.toLowerCase();\n        return lower === 'notice' || lower.startsWith('notice.');\n    });\n    if (noticeFile) {\n        const noticeFilepath = path.join(moduleLoc, noticeFile);\n        const noticeFileStats = await fs.stat(noticeFilepath);\n        if (noticeFileStats.isFile()) {\n            info.noticeText = await fs.readFile(noticeFilepath);\n        }\n    }\n    for (const dependencyType of MANIFEST_FIELDS) {\n        const dependencyList = info[dependencyType];\n        if (dependencyList && typeof dependencyList === 'object') {\n            delete dependencyList['//'];\n            for (const name in dependencyList) {\n                dependencyList[name] = dependencyList[name] || '';\n            }\n        }\n    }\n});\n","import validate from './validate.js';\nimport fix from './fix.js';\nimport * as path from 'path';\nexport default (async function (info, moduleLoc, config, isRoot) {\n    // Append dependencies\n    // if (depInfo) {\n    //   info.dependencies = depInfo.main;\n    //   info.devDependencies = depInfo.dev;\n    // }\n    // create human readable name\n    const { name, version } = info;\n    let human;\n    if (typeof name === 'string') {\n        human = name;\n    }\n    if (human && typeof version === 'string' && version) {\n        human += `@${version}`;\n    }\n    if (isRoot && info._loc) {\n        human = path.relative(config.cwd, info._loc);\n    }\n    function warn(msg) {\n        if (human) {\n            msg = `${human}: ${msg}`;\n        }\n        config.reporter.warn(msg);\n    }\n    await fix(info, moduleLoc, config.reporter, warn);\n    try {\n        validate(info, isRoot, config.reporter, warn);\n    }\n    catch (err) {\n        if (human) {\n            err.message = `${human}: ${err.message}`;\n        }\n        throw err;\n    }\n    return info;\n});\n","import map from './map.js';\nexport default class BlockingQueue {\n    constructor(alias, maxConcurrency = Infinity) {\n        this.concurrencyQueue = [];\n        this.maxConcurrency = maxConcurrency;\n        this.runningCount = 0;\n        this.warnedStuck = false;\n        this.alias = alias;\n        this.first = true;\n        this.running = map() || {};\n        this.queue = map() || {};\n        this.stuckTick = this.stuckTick.bind(this);\n    }\n    stillActive() {\n        if (this.stuckTimer) {\n            clearTimeout(this.stuckTimer);\n        }\n        this.stuckTimer = setTimeout(this.stuckTick, 5000);\n        // We need to check the existence of unref because of https://github.com/facebook/jest/issues/4559\n        // $FlowFixMe: Node's setInterval returns a Timeout, not a Number\n        this.stuckTimer.unref && this.stuckTimer.unref();\n    }\n    stuckTick() {\n        if (this.runningCount === 1) {\n            this.warnedStuck = true;\n            console.log(`The ${JSON.stringify(this.alias)} blocking queue may be stuck. 5 seconds ` +\n                `without any activity with 1 worker: ${Object.keys(this.running)[0]}`);\n        }\n    }\n    push(key, factory) {\n        if (this.first) {\n            this.first = false;\n        }\n        else {\n            this.stillActive();\n        }\n        return new Promise((resolve, reject) => {\n            // we're already running so push ourselves to the queue\n            const queue = (this.queue[key] = this.queue[key] || []);\n            queue.push({ factory, resolve, reject });\n            if (!this.running[key]) {\n                this.shift(key);\n            }\n        });\n    }\n    shift(key) {\n        if (this.running[key]) {\n            delete this.running[key];\n            this.runningCount--;\n            if (this.stuckTimer) {\n                clearTimeout(this.stuckTimer);\n                this.stuckTimer = null;\n            }\n            if (this.warnedStuck) {\n                this.warnedStuck = false;\n                console.log(`${JSON.stringify(this.alias)} blocking queue finally resolved. Nothing to worry about.`);\n            }\n        }\n        const queue = this.queue[key];\n        if (!queue) {\n            return;\n        }\n        const { resolve, reject, factory } = queue.shift();\n        if (!queue.length) {\n            delete this.queue[key];\n        }\n        const next = () => {\n            this.shift(key);\n            this.shiftConcurrencyQueue();\n        };\n        const run = () => {\n            this.running[key] = true;\n            this.runningCount++;\n            factory()\n                .then(function (val) {\n                resolve(val);\n                next();\n                return null;\n            })\n                .catch(function (err) {\n                reject(err);\n                next();\n            });\n        };\n        this.maybePushConcurrencyQueue(run);\n    }\n    maybePushConcurrencyQueue(run) {\n        if (this.runningCount < this.maxConcurrency) {\n            run();\n        }\n        else {\n            this.concurrencyQueue.push(run);\n        }\n    }\n    shiftConcurrencyQueue() {\n        if (this.runningCount < this.maxConcurrency) {\n            const fn = this.concurrencyQueue.shift();\n            if (fn) {\n                fn();\n            }\n        }\n    }\n}\n","import { MessageError } from '@pika/types';\nexport class ProcessSpawnError extends MessageError {\n    constructor(msg, code, process) {\n        super(msg);\n        this.code = code;\n        this.process = process;\n    }\n}\nexport class SecurityError extends MessageError {\n}\nexport class ProcessTermError extends MessageError {\n}\nexport class ResponseError extends Error {\n    constructor(msg, responseCode) {\n        super(msg);\n        this.responseCode = responseCode;\n    }\n}\nexport class OneTimePasswordError extends Error {\n}\n","/* global child_process$spawnOpts */\nimport * as constants from '../constants.js';\nimport BlockingQueue from './blocking-queue.js';\nimport { ProcessSpawnError, ProcessTermError } from '../errors.js';\nimport { promisify } from './promise.js';\nimport { exec as _exec, spawn as _spawn } from 'child_process';\nexport const queue = new BlockingQueue('child', constants.CHILD_CONCURRENCY);\n// TODO: this uid check is kinda whack\nlet uid = 0;\nexport const exec = promisify(_exec);\nconst spawnedProcesses = {};\nexport function forwardSignalToSpawnedProcesses(signal) {\n    for (const key of Object.keys(spawnedProcesses)) {\n        spawnedProcesses[key].kill(signal);\n    }\n}\nexport function spawn(program, args, opts = {}, onData) {\n    const key = opts.cwd || String(++uid);\n    return queue.push(key, () => new Promise((resolve, reject) => {\n        const proc = _spawn(program, args, opts);\n        spawnedProcesses[key] = proc;\n        let processingDone = false;\n        let processClosed = false;\n        let err = null;\n        let stdout = '';\n        proc.on('error', (err) => {\n            if (err.code === 'ENOENT') {\n                reject(new ProcessSpawnError(`Couldn't find the binary ${program}`, err.code, program));\n            }\n            else {\n                reject(err);\n            }\n        });\n        function updateStdout(chunk) {\n            stdout += chunk;\n            if (onData) {\n                onData(chunk);\n            }\n        }\n        function finish() {\n            delete spawnedProcesses[key];\n            if (err) {\n                reject(err);\n            }\n            else {\n                resolve(stdout.trim());\n            }\n        }\n        if (typeof opts.process === 'function') {\n            opts.process(proc, updateStdout, reject, function () {\n                if (processClosed) {\n                    finish();\n                }\n                else {\n                    processingDone = true;\n                }\n            });\n        }\n        else {\n            if (proc.stderr) {\n                proc.stderr.on('data', updateStdout);\n            }\n            if (proc.stdout) {\n                proc.stdout.on('data', updateStdout);\n            }\n            processingDone = true;\n        }\n        proc.on('close', (code, signal) => {\n            if (signal || code >= 1) {\n                err = new ProcessTermError([\n                    'Command failed.',\n                    signal ? `Exit signal: ${signal}` : `Exit code: ${code}`,\n                    `Command: ${program}`,\n                    `Arguments: ${args.join(' ')}`,\n                    `Directory: ${opts.cwd || process.cwd()}`,\n                    `Output:\\n${stdout.trim()}`,\n                ].join('\\n'));\n                err.EXIT_SIGNAL = signal;\n                err.EXIT_CODE = code;\n            }\n            if (processingDone || err) {\n                finish();\n            }\n            else {\n                processClosed = true;\n            }\n        });\n    }));\n}\n","export function fixCmdWinSlashes(cmd) {\n    function findQuotes(quoteSymbol) {\n        const quotes = [];\n        const addQuote = (_, index) => {\n            quotes.push({ from: index, to: index + _.length });\n            return _;\n        };\n        const regEx = new RegExp(quoteSymbol + '.*' + quoteSymbol);\n        cmd.replace(regEx, addQuote);\n        return quotes;\n    }\n    const quotes = findQuotes('\"').concat(findQuotes(\"'\"));\n    function isInsideQuotes(index) {\n        return quotes.reduce((result, quote) => {\n            return result || (quote.from <= index && index <= quote.to);\n        }, false);\n    }\n    const cmdPrePattern = '((?:^|&&|&|\\\\|\\\\||\\\\|)\\\\s*)';\n    const cmdPattern = '(\".*?\"|\\'.*?\\'|\\\\S*)';\n    const regExp = new RegExp(`${cmdPrePattern}${cmdPattern}`, 'g');\n    return cmd.replace(regExp, (whole, pre, cmd, index) => {\n        if ((pre[0] === '&' || pre[0] === '|') && isInsideQuotes(index)) {\n            return whole;\n        }\n        return pre + cmd.replace(/\\//g, '\\\\');\n    });\n}\n","import * as child from './child.js';\nimport { fixCmdWinSlashes } from './fix-cmd-win-slashes.js';\n// export const IGNORE_MANIFEST_KEYS: Set<string> = new Set(['readme', 'notice', 'licenseText']);\n// // We treat these configs as internal, thus not expose them to process.env.\n// // This helps us avoid some gyp issues when building native modules.\n// // See https://github.com/yarnpkg/yarn/issues/2286.\n// const IGNORE_CONFIG_KEYS = ['lastUpdateCheck'];\n// async function getPnpParameters(config: Config): Promise<Array<string>> {\n//   if (await fs.exists(`${config.lockfileFolder}/${constants.PNP_FILENAME}`)) {\n//     return ['-r', `${config.lockfileFolder}/${constants.PNP_FILENAME}`];\n//   } else {\n//     return [];\n//   }\n// }\n// let wrappersFolder = null;\n// export async function getWrappersFolder(config: Config): Promise<string> {\n//   if (wrappersFolder) {\n//     return wrappersFolder;\n//   }\n//   wrappersFolder = await fs.makeTempDir();\n//   await makePortableProxyScript(process.execPath, wrappersFolder, {\n//     proxyBasename: 'node',\n//     prependArguments: [...(await getPnpParameters(config))],\n//   });\n//   await makePortableProxyScript(process.execPath, wrappersFolder, {\n//     proxyBasename: 'pika',\n//     prependArguments: [process.argv[1]],\n//   });\n//   return wrappersFolder;\n// }\n// const INVALID_CHAR_REGEX = /\\W/g;\nexport async function makeEnv() {\n    // stage: string,\n    // cwd: string,\n    // config: Config,\n    const env = {\n        NODE: process.execPath,\n        INIT_CWD: process.cwd(),\n        // This lets `process.env.NODE` to override our `process.execPath`.\n        // This is a bit confusing but it is how `npm` was designed so we\n        // try to be compatible with that.\n        ...process.env,\n    };\n    return env;\n}\n//   // Merge in the `env` object specified in .pikarc\n//   const customEnv = config.getOption('env');\n//   if (customEnv && typeof customEnv === 'object') {\n//     Object.assign(env, customEnv);\n//   }\n//   env.npm_lifecycle_event = stage;\n//   env.npm_node_execpath = env.NODE;\n//   env.npm_execpath = env.npm_execpath || (process.mainModule && process.mainModule.filename);\n//   // Set the env to production for npm compat if production mode.\n//   // https://github.com/npm/npm/blob/30d75e738b9cb7a6a3f9b50e971adcbe63458ed3/lib/utils/lifecycle.js#L336\n//   if (config.production) {\n//     env.NODE_ENV = 'production';\n//   }\n//   // Note: npm_config_argv environment variable contains output of nopt - command-line\n//   // parser used by npm. Since we use other parser, we just roughly emulate it's output. (See: #684)\n//   env.npm_config_argv = JSON.stringify({\n//     remain: [],\n//     cooked: config.commandName === 'run' ? [config.commandName, stage] : [config.commandName],\n//     original: process.argv.slice(2),\n//   });\n//   const manifest = await config.maybeReadManifest(cwd);\n//   if (manifest) {\n//     if (manifest.scripts && Object.prototype.hasOwnProperty.call(manifest.scripts, stage)) {\n//       env.npm_lifecycle_script = manifest.scripts[stage];\n//     }\n//     // add npm_package_*\n//     const queue = [['', manifest]];\n//     while (queue.length) {\n//       const [key, val] = queue.pop();\n//       if (typeof val === 'object') {\n//         for (const subKey in val) {\n//           const fullKey = [key, subKey].filter(Boolean).join('_');\n//           if (fullKey && fullKey[0] !== '_' && !IGNORE_MANIFEST_KEYS.has(fullKey)) {\n//             queue.push([fullKey, val[subKey]]);\n//           }\n//         }\n//       } else {\n//         let cleanVal = String(val);\n//         if (cleanVal.indexOf('\\n') >= 0) {\n//           cleanVal = JSON.stringify(cleanVal);\n//         }\n//         //replacing invalid chars with underscore\n//         const cleanKey = key.replace(INVALID_CHAR_REGEX, '_');\n//         env[`npm_package_${cleanKey}`] = cleanVal;\n//       }\n//     }\n//   }\n//   // add npm_config_* and npm_package_config_* from pika config\n//   const keys: Set<string> = new Set([\n//     ...Object.keys(config.registries.pika.config),\n//     ...Object.keys(config.registries.npm.config),\n//   ]);\n//   const cleaned = Array.from(keys)\n//     .filter(key => !key.match(/:_/) && IGNORE_CONFIG_KEYS.indexOf(key) === -1)\n//     .map(key => {\n//       let val = config.getOption(key);\n//       if (!val) {\n//         val = '';\n//       } else if (typeof val === 'number') {\n//         val = '' + val;\n//       } else if (typeof val !== 'string') {\n//         val = JSON.stringify(val);\n//       }\n//       if (val.indexOf('\\n') >= 0) {\n//         val = JSON.stringify(val);\n//       }\n//       return [key, val];\n//     });\n//   // add npm_config_*\n//   for (const [key, val] of cleaned) {\n//     const cleanKey = key.replace(/^_+/, '');\n//     const envKey = `npm_config_${cleanKey}`.replace(INVALID_CHAR_REGEX, '_');\n//     env[envKey] = val;\n//   }\n//   // add npm_package_config_*\n//   if (manifest && manifest.name) {\n//     const packageConfigPrefix = `${manifest.name}:`;\n//     for (const [key, val] of cleaned) {\n//       if (key.indexOf(packageConfigPrefix) !== 0) {\n//         continue;\n//       }\n//       const cleanKey = key.replace(/^_+/, '').replace(packageConfigPrefix, '');\n//       const envKey = `npm_package_config_${cleanKey}`.replace(INVALID_CHAR_REGEX, '_');\n//       env[envKey] = val;\n//     }\n//   }\n//   // split up the path\n//   const envPath = env[constants.ENV_PATH_KEY];\n//   const pathParts = envPath ? envPath.split(path.delimiter) : [];\n//   // Include the directory that contains node so that we can guarantee that the scripts\n//   // will always run with the exact same Node release than the one use to run Pika\n//   const execBin = path.dirname(process.execPath);\n//   if (pathParts.indexOf(execBin) === -1) {\n//     pathParts.unshift(execBin);\n//   }\n//   // Include node-gyp version that was bundled with the current Node.js version,\n//   // if available.\n//   pathParts.unshift(path.join(path.dirname(process.execPath), 'node_modules', 'npm', 'bin', 'node-gyp-bin'));\n//   pathParts.unshift(\n//     path.join(path.dirname(process.execPath), '..', 'lib', 'node_modules', 'npm', 'bin', 'node-gyp-bin'),\n//   );\n//   // Include node-gyp version from homebrew managed npm, if available.\n//   pathParts.unshift(\n//     path.join(path.dirname(process.execPath), '..', 'libexec', 'lib', 'node_modules', 'npm', 'bin', 'node-gyp-bin'),\n//   );\n//   // Add global bin folder if it is not present already, as some packages depend\n//   // on a globally-installed version of node-gyp.\n//   const globalBin = await getGlobalBinFolder(config, {});\n//   if (pathParts.indexOf(globalBin) === -1) {\n//     pathParts.unshift(globalBin);\n//   }\n//   // Add node_modules .bin folders to the PATH\n//   for (const registry of Object.keys(registries)) {\n//     const binFolder = path.join(config.registries[registry].folder, '.bin');\n//     if (config.workspacesEnabled && config.workspaceRootFolder) {\n//       pathParts.unshift(path.join(config.workspaceRootFolder, binFolder));\n//     }\n//     pathParts.unshift(path.join(config.linkFolder, binFolder));\n//     pathParts.unshift(path.join(cwd, binFolder));\n//     if (config.modulesFolder) {\n//       pathParts.unshift(path.join(config.modulesFolder, '.bin'));\n//     }\n//   }\n//   if (await fs.exists(`${config.lockfileFolder}/${constants.PNP_FILENAME}`)) {\n//     // TODO: Fix. import()? Do we even like that it does this?\n//     throw new Error(\"pnp temporarily not supported\");\n//     const pnpApi = {}; //dynamicRequire(`${config.lockfileFolder}/${constants.PNP_FILENAME}`);\n//     const packageLocator = pnpApi.findPackageLocator(`${config.cwd}/`);\n//     const packageInformation = pnpApi.getPackageInformation(packageLocator);\n//     for (const [name, reference] of packageInformation.packageDependencies.entries()) {\n//       const dependencyInformation = pnpApi.getPackageInformation({name, reference});\n//       if (!dependencyInformation || !dependencyInformation.packageLocation) {\n//         continue;\n//       }\n//       pathParts.unshift(`${dependencyInformation.packageLocation}/.bin`);\n//     }\n//   }\n//   pathParts.unshift(await getWrappersFolder(config));\n//   // join path back together\n//   env[constants.ENV_PATH_KEY] = pathParts.join(path.delimiter);\n//   return env;\n// }\nexport async function executeLifecycleScript({ \n// config,\ncwd, cmd, args, isInteractive, onProgress, customShell, }) {\n    const env = await makeEnv();\n    // await checkForGypIfNeeded(config, cmd, env[constants.ENV_PATH_KEY].split(path.delimiter));\n    if (process.platform === 'win32' && (!customShell || customShell === 'cmd')) {\n        // handle windows run scripts starting with a relative path\n        cmd = fixCmdWinSlashes(cmd);\n    }\n    // By default (non-interactive), pipe everything to the terminal and run child process detached\n    // as long as it's not Windows (since windows does not have /dev/tty)\n    let stdio = ['ignore', 'pipe', 'pipe'];\n    let detached = process.platform !== 'win32';\n    if (isInteractive) {\n        stdio = 'inherit';\n        detached = false;\n    }\n    const shell = customShell || true;\n    const stdout = await child.spawn(cmd, args, { cwd, env, stdio, detached, shell }, onProgress);\n    return { cwd, command: cmd, stdout };\n}\nexport default executeLifecycleScript;\n// let checkGypPromise: Promise<void> = null;\n// // /**\n// //  * Special case: Some packages depend on node-gyp, but don't specify this in\n// //  * their package.json dependencies. They assume that node-gyp is available\n// //  * globally. We need to detect this case and show an error message.\n// //  */\n// function checkForGypIfNeeded(config: Config, cmd: string, paths: Array<string>): Promise<void> {\n//   if (cmd.substr(0, cmd.indexOf(' ')) !== 'node-gyp') {\n//     return Promise.resolve();\n//   }\n//   // Ensure this only runs once, rather than multiple times in parallel.\n//   if (!checkGypPromise) {\n//     checkGypPromise = _checkForGyp(config, paths);\n//   }\n//   return checkGypPromise;\n// }\n// async function _checkForGyp(config: Config, paths: Array<string>): Promise<void> {\n//   const {reporter} = config;\n//   // Check every directory in the PATH\n//   const allChecks = await Promise.all(paths.map(dir => fs.exists(path.join(dir, 'node-gyp'))));\n//   if (allChecks.some(Boolean)) {\n//     // node-gyp is available somewhere\n//     return;\n//   }\n//   reporter.info(reporter.lang('packageRequiresNodeGyp'));\n// }\n// export async function execFromDistributions(config: Config, cwd: string, dist: string, step: string): Promise<void> {\n//   const pkg = await config.maybeReadManifest(cwd);\n//   if (!pkg || !pkg.distributions || !pkg.distributions[dist] || typeof pkg.distributions[dist][step] !== 'string') {\n//     return false;\n//   }\n//   const cmd: ?string = pkg.distributions[dist][step];\n//   await execCommand({stage: 'build', config, cmd, cwd, isInteractive: true});\n//   return true;\n// }\n// export async function execFromManifest(config: Config, commandName: string, cwd: string): Promise<void> {\n//   const pkg = await config.maybeReadManifest(cwd);\n//   if (!pkg || !pkg.scripts) {\n//     return;\n//   }\n//   const cmd: ?string = pkg.scripts[commandName];\n//   if (cmd) {\n//     await execCommand({stage: commandName, config, cmd, cwd, isInteractive: true});\n//   }\n// }\n// export async function execCommand({\n//   stage,\n//   config,\n//   cmd,\n//   cwd,\n//   isInteractive,\n//   customShell,\n// }: {\n//   stage: string;\n//   config: Config;\n//   cmd: string;\n//   cwd: string;\n//   isInteractive: boolean;\n//   customShell?: string;\n// }): Promise<void> {\n//   const {reporter} = config;\n//   try {\n//     reporter.command(cmd);\n//     await executeLifecycleScript({config, cwd, cmd, isInteractive, customShell});\n//     return Promise.resolve();\n//   } catch (err) {\n//     if (err instanceof ProcessTermError) {\n//       throw new MessageError(\n//         err.EXIT_SIGNAL\n//           ? reporter.lang('commandFailedWithSignal', err.EXIT_SIGNAL)\n//           : reporter.lang('commandFailedWithCode', err.EXIT_CODE),\n//       );\n//     } else {\n//       throw err;\n//     }\n//   }\n// }\n","import * as path from 'path';\nimport * as constants from './constants.js';\nimport { MessageError } from '@pika/types';\nimport * as fs from './util/fs.js';\nimport normalizeManifest from './util/normalize-manifest/index.js';\nimport executeLifecycleScript from './util/execute-lifecycle-script.js';\nimport importFrom from 'import-from';\n;\n;\nexport default class Config {\n    constructor(reporter, cwd, flags) {\n        this.reporter = reporter;\n        // Ensure the cwd is always an absolute path.\n        this.cwd = path.resolve(cwd || process.cwd());\n        this.flags = flags;\n    }\n    async loadPackageManifest() {\n        const loc = path.join(this.cwd, constants.NODE_PACKAGE_JSON);\n        if (await fs.exists(loc)) {\n            const info = await this.readJson(loc, fs.readJsonAndFile);\n            this._manifest = { ...info.object };\n            this.manifest = await normalizeManifest(info.object, this.cwd, this, true);\n            return this.manifest;\n        }\n        else {\n            return null;\n        }\n    }\n    readJson(loc, factory = fs.readJson) {\n        try {\n            return factory(loc);\n        }\n        catch (err) {\n            if (err instanceof SyntaxError) {\n                throw new MessageError(this.reporter.lang('jsonError', loc, err.message));\n            }\n            else {\n                throw err;\n            }\n        }\n    }\n    async getDistributions() {\n        const raw = this.manifest[`@pika/pack`] || {};\n        const override = this.flags.pipeline && JSON.parse(this.flags.pipeline);\n        const cwd = this.cwd;\n        function cleanRawDistObject(rawVal) {\n            if (Array.isArray(rawVal)) {\n                let importStr = (rawVal[0].startsWith('./') || rawVal[0].startsWith('../')) ? path.join(cwd, rawVal[0]) : rawVal[0];\n                return [{ ...importFrom(cwd, importStr), name: rawVal[0] }, rawVal[1] || {}];\n            }\n            if (typeof rawVal === 'string') {\n                return [{ build: ({ cwd }) => {\n                            return executeLifecycleScript({\n                                // config: this,\n                                args: [],\n                                cwd,\n                                cmd: rawVal,\n                                isInteractive: false\n                            });\n                        } }, {}];\n            }\n            if (!rawVal) {\n                throw new Error('Cannot be false');\n            }\n            return false;\n        }\n        const pipeline = override || raw.pipeline || [];\n        return pipeline.map(cleanRawDistObject).filter(Boolean);\n    }\n}\n","import { forwardSignalToSpawnedProcesses } from './child.js';\nfunction forwardSignalAndExit(signal) {\n    forwardSignalToSpawnedProcesses(signal);\n    // We want to exit immediately here since `SIGTERM` means that\n    // If we lose stdout messages due to abrupt exit, shoot the messenger?\n    process.exit(1); // eslint-disable-line no-process-exit\n}\nexport default function handleSignals() {\n    process.on('SIGTERM', () => {\n        forwardSignalAndExit('SIGTERM');\n    });\n}\n","const FALSY_STRINGS = new Set(['0', 'false']);\nexport function boolify(val) {\n    return !FALSY_STRINGS.has(val.toString().toLowerCase());\n}\nexport function boolifyWithDefault(val, defaultResult) {\n    return val === '' || val === null || val === undefined ? defaultResult : boolify(val);\n}\n","import * as path from 'path';\nimport chalk from 'chalk';\nimport * as fs from 'fs';\nimport invariant from 'invariant';\nimport loudRejection from 'loud-rejection';\nimport { ConsoleReporter, JSONReporter } from './reporters/index.js';\nimport * as buildCommand from './commands/build.js';\nimport { MessageError } from '@pika/types';\nimport Config from './config.js';\nimport handleSignals from './util/signal-handler.js';\nimport { boolifyWithDefault } from './util/conversion.js';\nimport map from './util/map.js';\nimport stripBOM from 'strip-bom';\nimport uri2path from 'file-uri-to-path';\nimport yargs from 'yargs-parser';\n// @ts-ignore\nconst currentFilename = uri2path(import.meta.url);\nfunction getVersion() {\n    const packageJsonContent = fs.readFileSync(path.resolve(currentFilename, '../../package.json'), { encoding: 'utf-8' });\n    const { version } = map(JSON.parse(stripBOM(packageJsonContent)));\n    return version;\n}\nfunction printHelp() {\n    console.log(`\n${chalk.bold(`@pika/pack`)} - Build npm packages without the mess.\n${chalk.bold('Options:')}\n    --cwd               Set the current working directory.\n    --out               Set the output directory. Defaults to \"pkg/\".\n    --pipeline          Set a build pipeline via JSON string.\n    --force             Continue with the build when a build plugin fails or throws an exception.\n    --json              Log output as JSON.\n    --verbose           Log additional debugging information.\n    --silent            Log almost nothing.\n    --help              Print help.\n    --version, -v       Print version.\n    `.trim());\n}\nexport async function cli(args) {\n    const version = getVersion();\n    loudRejection();\n    handleSignals();\n    // Handle special flags\n    if (args.find(arg => arg === '--version' || arg === '-v')) {\n        console.log(version.trim());\n        process.exitCode = 0;\n        return;\n    }\n    if (args.find(arg => arg === '--help')) {\n        printHelp();\n        process.exitCode = 0;\n        return;\n    }\n    // Handle the legacy CLI interface\n    if (args[2] === 'publish') {\n        console.log(`The publish flow has moved to the @pika/cli package (included with this package).\nUpdate your publish script to: ${chalk.bold('pika publish [flags]')}\n`);\n        process.exitCode = 1;\n        return;\n    }\n    if (args[2] === 'build') {\n        console.log(chalk.yellow(`Note: This CLI was recently deprecated. Update your build script to: ${chalk.bold('pika build [flags]')}`));\n        args.splice(2, 1);\n    }\n    const flags = yargs(args);\n    const cwd = flags.cwd || process.cwd();\n    const Reporter = flags.json ? JSONReporter : ConsoleReporter;\n    const reporter = new Reporter({\n        emoji: true,\n        verbose: flags.verbose,\n        isSilent: boolifyWithDefault(process.env.PIKA_SILENT, false) || flags.silent,\n    });\n    const exit = (exitCode = 0) => {\n        process.exitCode = exitCode;\n        reporter.close();\n    };\n    const command = buildCommand;\n    reporter.initPeakMemoryCounter();\n    const outputWrapperEnabled = boolifyWithDefault(process.env.PIKA_WRAP_OUTPUT, true);\n    const shouldWrapOutput = outputWrapperEnabled && !flags.json && command.hasWrapper();\n    if (shouldWrapOutput) {\n        reporter.header({ name: '@pika/pack', version });\n    }\n    const run = () => {\n        invariant(command, 'missing command');\n        return command.run(config, reporter, flags, args).then(exitCode => {\n            if (shouldWrapOutput) {\n                reporter.footer(false);\n            }\n            return exitCode;\n        });\n    };\n    function onUnexpectedError(err) {\n        function indent(str) {\n            return '\\n  ' + str.trim().split('\\n').join('\\n  ');\n        }\n        const log = [];\n        log.push(`Arguments: ${indent(process.argv.join(' '))}`);\n        log.push(`PATH: ${indent(process.env.PATH || 'undefined')}`);\n        log.push(`Pika version: ${indent(version)}`);\n        log.push(`Node version: ${indent(process.versions.node)}`);\n        log.push(`Platform: ${indent(process.platform + ' ' + process.arch)}`);\n        log.push(`Trace: ${indent(err.stack)}`);\n        reporter.error(reporter.lang('unexpectedError', err.message));\n    }\n    const config = new Config(reporter, cwd, flags);\n    await config.loadPackageManifest();\n    try {\n        // option \"no-progress\" stored in pika config\n        const noProgressConfig = false; //config.registries.pika.getOption('no-progress');\n        if (noProgressConfig) {\n            reporter.disableProgress();\n        }\n        // verbose logs outputs process.uptime() with this line we can sync uptime to absolute time on the computer\n        reporter.verbose(`current time: ${new Date().toISOString()}`);\n        return run().then(exit);\n    }\n    catch (err) {\n        reporter.verbose(err.stack);\n        if (err instanceof MessageError) {\n            reporter.error(err.message);\n        }\n        else {\n            onUnexpectedError(err);\n        }\n        return exit(1);\n    }\n}\n"],"names":["removeSuffix","pattern","suffix","endsWith","slice","length","formatFunction","strs","join","defaultFormatter","bold","dim","italic","underline","inverse","strikethrough","black","red","green","yellow","blue","magenta","cyan","white","gray","grey","stripColor","messages","upToDate","folderInSync","nothingToInstall","resolvingPackages","checkingManifest","fetchingPackages","linkingDependencies","rebuildingPackages","buildingFreshPackages","cleaningModules","bumpingVersion","savingHar","answer","usage","installCommandRenamed","globalFlagRemoved","waitingInstance","waitingNamedInstance","offlineRetrying","internalServerErrorRetrying","clearedCache","couldntClearPackageFromCache","clearedPackageFromCache","packWroteTarball","helpExamples","helpCommands","helpCommandsMore","helpLearnMore","manifestPotentialTypo","manifestBuiltinModule","manifestNameDot","manifestNameIllegalChars","manifestNameBlacklisted","manifestLicenseInvalid","manifestLicenseNone","manifestStringExpected","manifestDependencyCollision","manifestDirectoryNotFound","verboseFileCopy","verboseFileLink","verboseFileSymlink","verboseFileSkip","verboseFileSkipSymlink","verboseFileSkipHardlink","verboseFileRemoveExtraneous","verboseFilePhantomExtraneous","verboseFileSkipArtifact","verboseFileFolder","verboseRequestStart","verboseRequestFinish","configSet","configDelete","configNpm","configPika","couldntFindPackagejson","couldntFindMatch","couldntFindPackageInCache","couldntFindVersionThatMatchesRange","chooseVersionFromList","moduleNotInManifest","moduleAlreadyInManifest","unknownFolderOrTarball","unknownPackage","unknownPackageName","unknownUser","unknownRegistryResolver","userNotAnOwner","invalidVersionArgument","invalidVersion","requiredVersionInRange","packageNotFoundRegistry","requiredPackageNotFoundRegistry","doesntExist","missingRequiredPackageKey","invalidAccess","invalidCommand","invalidGistFragment","invalidHostedGitFragment","invalidFragment","invalidPackageName","invalidPackageVersion","couldntFindManifestIn","shrinkwrapWarning","npmLockfileWarning","lockfileOutdated","lockfileMerged","lockfileConflict","ignoredScripts","missingAddDependencies","yesWarning","networkWarning","flatGlobalError","noName","noVersion","answerRequired","missingWhyDependency","bugReport","unexpectedError","jsonError","noPermission","noGlobalFolder","allDependenciesUpToDate","legendColorsForVersionUpdates","frozenLockfileError","fileWriteError","fileDeleteError","multiplePackagesCantUnpackInSameDestination","incorrectLockfileEntry","invalidResolutionName","invalidResolutionVersion","incompatibleResolutionVersion","pikaOutdated","pikaOutdatedInstaller","pikaOutdatedCommand","tooManyArguments","tooFewArguments","noArguments","ownerRemoving","ownerRemoved","ownerRemoveError","ownerGetting","ownerGettingFailed","ownerAlready","ownerAdded","ownerAdding","ownerAddingFailed","ownerNone","teamCreating","teamRemoving","teamAddingUser","teamRemovingUser","teamListing","distFailed","distExiting","distContinuing","cleaning","cleanCreatingFile","cleanCreatedFile","cleanAlreadyExists","cleanRequiresForce","cleanDoesNotExist","binLinkCollision","linkCollision","linkMissing","linkRegistered","linkRegisteredMessage","linkUnregistered","linkUnregisteredMessage","linkUsing","linkDisusing","linkDisusingMessage","linkTargetMissing","createInvalidBin","createMissingPackage","workspacesAddRootCheck","workspacesRemoveRootCheck","workspacesFocusRootCheck","workspacesRequirePrivateProjects","workspacesSettingMustBeArray","workspacesDisabled","workspacesNohoistRequirePrivatePackages","workspacesNohoistDisabled","workspaceRootNotFound","workspaceMissingWorkspace","workspaceMissingCommand","workspaceUnknownWorkspace","workspaceVersionMandatory","workspaceNameMandatory","workspaceNameDuplicate","cacheFolderSkipped","cacheFolderMissing","cacheFolderSelected","execMissingCommand","noScriptsAvailable","noBinAvailable","dashDashDeprecation","commandNotSpecified","binCommands","possibleCommands","commandQuestion","commandFailedWithCode","commandFailedWithSignal","packageRequiresNodeGyp","nodeGypAutoInstallFailed","foundIncompatible","incompatibleEngine","incompatibleCPU","incompatibleOS","invalidEngine","optionalCompatibilityExcluded","optionalModuleFail","optionalModuleScriptFail","optionalModuleCleanupFail","unmetPeer","incorrectPeer","selectedPeer","missingBundledDependency","savedNewDependency","savedNewDependencies","directDependencies","allDependencies","foundWarnings","foundErrors","savedLockfile","noRequiredLockfile","noLockfileFound","invalidSemver","newVersion","currentVersion","noVersionOnPublish","manualVersionResolution","manualVersionResolutionOption","createdTag","createdTagFail","deletedTag","deletedTagFail","gettingTags","deletingTags","creatingTag","whyStart","whyFinding","whyCalculating","whyUnknownMatch","whyInitGraph","whyWhoKnows","whyDiskSizeWithout","whyDiskSizeUnique","whyDiskSizeTransitive","whySharedDependencies","whyHoistedTo","whyHoistedFromSimple","whyNotHoistedSimple","whyDependedOnSimple","whySpecifiedSimple","whyReasons","whyHoistedFrom","whyNotHoisted","whyDependedOn","whySpecified","whyMatch","uninstalledPackages","uninstallRegenerate","cleanRemovedFiles","cleanSavedSize","configFileFound","configPossibleFile","npmUsername","npmPassword","npmEmail","npmOneTimePassword","loggingIn","loggedIn","notRevokingEnvToken","notRevokingConfigToken","noTokenToRevoke","revokingToken","revokedToken","loginAsPublic","incorrectCredentials","incorrectOneTimePassword","twoFactorAuthenticationEnabled","clearedCredentials","publishFail","publishPrivate","published","publishing","nonInteractiveNoVersionSpecified","nonInteractiveNoToken","infoFail","malformedRegistryResponse","registryNoVersions","cantRequestOffline","requestManagerNotSetupHAR","requestError","requestFailed","tarballNotInNetworkOrCache","fetchBadHashWithPath","fetchBadIntegrityAlgorithm","fetchErrorCorrupt","errorExtractingTarball","updateInstalling","hostedGitResolveError","unknownFetcherFor","downloadGitWithoutCommit","downloadHTTPWithoutCommit","unplugDisabled","plugnplayWindowsSupport","packageInstalledWithBinaries","packageHasBinaries","packageHasNoBinaries","packageBinaryNotFound","couldBeDeduped","lockfileNotContainPattern","integrityCheckFailed","noIntegrityFile","integrityFailedExpectedIsNotAJSON","integrityCheckLinkedModulesDontMatch","integrityFlagsDontMatch","integrityLockfilesDontMatch","integrityFailedFilesMissing","integrityPatternsDontMatch","integrityModulesFoldersMissing","integritySystemParamsDontMatch","packageNotInstalled","optionalDepNotInstalled","packageWrongVersion","packageDontSatisfy","lockfileExists","pikaManifestExists","noManifestExists","skippingImport","importFailed","importResolveFailed","importResolvedRangeMatch","importSourceFilesCorrupted","importPackageLock","importYarnLock","importNodeModules","packageContainsPikaAsGlobal","watchStarting","watchRunning","watchRebuild","watchError","noValidationErrors","validationErrors","scopeNotValid","deprecatedCommand","deprecatedListArgs","implicitFileDeprecated","unsupportedNodeVersion","verboseUpgradeBecauseRequested","verboseUpgradeBecauseOutdated","verboseUpgradeNotUnlocking","verboseUpgradeUnlocking","folderMissing","mutexPortBusy","auditRunning","auditSummary","auditSummarySeverity","auditCritical","auditHigh","auditModerate","auditLow","auditInfo","auditResolveCommand","auditSemverMajorChange","auditManualReview","auditRunAuditForDetails","auditOffline","stringifyLangArgs","args","map","val","inspect","str","JSON","stringify","replace","match","precededBacklash","os","e","util","BaseReporter","constructor","opts","lang","language","stdout","process","stderr","stdin","_getStandardInput","emoji","nonInteractive","noProgress","isCI","isVerbose","verbose","isTTY","peakMemory","startTime","Date","now","format","key","msg","languages","ReferenceError","stringifiedArgs","i","rawText","_verbose","verboseInspect","_verboseInspect","standardInput","console","warn","message","EventEmitter","initPeakMemoryCounter","checkPeakMemory","peakMemoryInterval","setInterval","unref","heapTotal","memoryUsage","close","clearInterval","getTotalTime","list","items","hints","tree","obj","force","step","current","total","error","info","success","log","command","value","header","pkg","footer","showPeakMemory","table","head","body","activity","tick","name","end","activitySet","workers","spinners","Array","fill","clear","setPrefix","progress","disableProgress","sortTrees","trees","sort","tree1","tree2","localeCompare","recurseTree","prefix","recurseFunc","treeLen","treeEnd","atEnd","getLastIndentChar","getNextIndentChar","getFormattedOutput","fmt","item","formatColor","color","formatter","getSuffix","hint","strToFormat","CLEAR_WHOLE_LINE","CLEAR_RIGHT_OF_CURSOR","clearLine","chalk","supportsColor","tty","columns","write","repeat","readline","toStartOfLine","writeOnNthLine","n","clearNthLine","ProgressBar","callback","chars","bars","delay","curr","_callback","id","setTimeout","render","cancelTick","clearTimeout","stop","ratio","Math","min","max","bar","availableSpace","width","completeLength","round","complete","incomplete","Spinner","lineNumber","split","text","setText","start","auditSeverityColors","low","moderate","high","critical","bgRed","platform","env","TERM","test","_styles","ConsoleReporter","_lastCategorySize","_spinners","Set","stripAnsi","isSilent","_prependEmoji","_logCategory","category","_log","uptime","spinner","stopProgress","field","rows","concat","cols","widths","row","builtRows","padding","breakLength","colors","depth","maxArrayLength","String","gutterWidth","version","totalTime","toFixed","output","children","titlePrefix","childrenPrefix","out","reporterSpinners","add","updatePrefix","unshift","_current","_prefix","delete","count","_progressBar","Progress","JSONReporter","_activityId","_progressId","_dump","type","data","push","_header","worker","_activity","DEPENDENCY_TYPES","RESOLUTIONS","MANIFEST_FIELDS","CHILD_CONCURRENCY","NODE_PACKAGE_JSON","DEFAULT_INDENT","ENV_PATH_KEY","getPathKey","pathKey","toLowerCase","nullify","isArray","Object","setPrototypeOf","unlink","promisify","_rimraf","glob","_glob","mkdirp","_mkdirp","open","fs","writeFile","readlink","realpath","readdir","rename","access","stat","exists","lstat","chmod","link","copyFile","readFileBuffer","readFile","path","encoding","readJson","loc","readJsonAndFile","object","file","parse","stripBOM","content","err","cr","charCodeAt","lf","getEolFromFile","undefined","buffer","writeFilePreservingEol","eol","generatePublishManifest","manifest","config","_dists","description","keywords","homepage","bugs","bin","license","authors","contributors","man","sideEffects","repository","dependencies","peerDependencies","devDependencies","bundledDependencies","optionalDependencies","engines","enginesStrict","private","priv","publishConfig","newManifest","files","pika","dists","getDistributions","runner","options","cwd","isFull","generatePrettyManifest","keys","hasWrapper","examples","Build","flags","reporter","totalNum","Error","cleanup","init","outPretty","sourcemap","distRunners","builderConfig","warning","created","filename","entrypoint","src","ignoreSet","nodir","absolute","ignore","from","g","filter","fileAbs","steps","validate","result","beforeBuild","beforeJob","build","afterJob","afterBuild","publishManifest","_manifest","currentStep","run","isProduction","publish","builder","autohr","autor","contributers","depdenencies","dependancies","dependecies","depends","devDependences","devDepenencies","devEependencies","devdependencies","hampage","hompage","prefereGlobal","publicationConfig","repo","repostitory","script","strings","dependencyKeys","isValidName","encodeURIComponent","isValidScopedName","parts","isValidPackageName","isRoot","typos","isBuiltinModule","MessageError","lower","cleanDependencies","depTypes","deps","nonTrivialDeps","Map","has","set","setDeps","dep","get","isValidLicense","validateLicense","validForNewPackages","stringifyPerson","person","email","mail","url","web","parsePerson","trim","normalizePerson","extractDescription","readme","lines","line","RegExp","MIT","Unlicense","clean","REGEXES","Apache","BSD","ISC","WTFPL","inferLicense","cleanLicense","licenseName","LICENSES","testLicense","search","regex","LICENSE_RENAMES","X11","moduleLoc","semver","indexOf","authorsFilepath","authorsFilestats","isFile","author","maintainers","readmeCandidates","filename1","filename2","readmeFilename","readmeFilepath","readmeFileStats","desc","patternParts","nodeUrl","protocol","pathname","hostname","bundleDependencies","scripts","install","dirs","directories","binDir","fullBinDir","scriptName","manDir","fullManDir","licenses","licenseTypes","licenseFile","find","startsWith","licenseFilepath","licenseFileStats","licenseContent","inferredLicense","licenseText","basicLicense","expandedLicense","noticeFile","noticeFilepath","noticeFileStats","noticeText","dependencyType","dependencyList","human","_loc","fix","BlockingQueue","alias","maxConcurrency","Infinity","concurrencyQueue","runningCount","warnedStuck","first","running","queue","stuckTick","bind","stillActive","stuckTimer","factory","Promise","resolve","reject","shift","next","shiftConcurrencyQueue","then","catch","maybePushConcurrencyQueue","fn","ProcessSpawnError","code","ProcessTermError","constants","uid","spawnedProcesses","forwardSignalToSpawnedProcesses","signal","kill","spawn","program","onData","proc","_spawn","processingDone","processClosed","on","updateStdout","chunk","finish","EXIT_SIGNAL","EXIT_CODE","fixCmdWinSlashes","cmd","findQuotes","quoteSymbol","quotes","addQuote","_","index","to","regEx","isInsideQuotes","reduce","quote","cmdPrePattern","cmdPattern","regExp","whole","pre","makeEnv","NODE","execPath","INIT_CWD","executeLifecycleScript","isInteractive","onProgress","customShell","stdio","detached","shell","child","Config","loadPackageManifest","normalizeManifest","SyntaxError","raw","override","pipeline","cleanRawDistObject","rawVal","importStr","importFrom","Boolean","forwardSignalAndExit","exit","handleSignals","FALSY_STRINGS","boolify","toString","boolifyWithDefault","defaultResult","currentFilename","uri2path","import","getVersion","packageJsonContent","printHelp","cli","loudRejection","arg","exitCode","splice","yargs","Reporter","json","PIKA_SILENT","silent","buildCommand","outputWrapperEnabled","PIKA_WRAP_OUTPUT","shouldWrapOutput","invariant","onUnexpectedError","indent","argv","PATH","versions","node","arch","stack","noProgressConfig","toISOString"],"mappings":"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"}